<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>Simulacres Heldor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="node_modules/mdbootstrap/css/mdb.min.css">
    <link rel="stylesheet" href="node_modules/bootstrap-slider/dist/css/bootstrap-slider.min.css">
    <link rel="stylesheet" href="node_modules/@fortawesome/fontawesome-free/css/all.min.css">

    <style>
        /* Set the font */
        body {
            font-family: Augusta, serif;
        }

        @font-face {
            font-family: Augusta;
            src: url("font/augusta.regular.ttf") format("truetype");
            font-weight: normal;
            font-style: normal;
        }

        /* Fix mdbootstrap that activates the icon when value attribute is set at loading */
        .md-form .input-prefix.active {
            color: black;
        }

        .clickable {
            cursor: pointer;
        }

        /* Sliders styling */

        .slider.slider-vertical.hp-slider {
            height: 5em;
        }

        .slider.slider-horizontal.hp-slider {
            width: 5em;
        }

        .slider-handle.custom.full::before {
            line-height: 20px;
            font-size: 20px;
            content: '\1F49A';
        }

        .slider-handle.custom.unease::before {
            line-height: 20px;
            font-size: 20px;
            content: '\1F9E1';
        }

        .slider-handle.custom.dead::before {
            line-height: 20px;
            font-size: 20px;
            content: '\1F5A4';
        }

        .slider-selection.full {
            background: green;
        }

        .slider-selection.unease {
            background: orange;
        }

        #unease-slider .slider-selection {
            background: red;
        }

        #unease-slider .slider-handle {
            background: red;
        }

        #breath-slider .slider-selection {
            background: dodgerblue;
        }

        #breath-slider .slider-handle.custom::before {
            content: '\1F4AA';
        }

        #psychic-slider .slider-selection {
            background: pink;
        }

        #psychic-slider .slider-handle.custom::before {
            content: '\1F9E0';
        }

        #rest-slider .slider-selection {
            background: darkgray;
        }

        #rest-slider .slider-handle.custom::before {
            content: '\1F6CF';
            background-color: white;
            border-radius: 50%;
        }

        .spell-difficulty .slider-selection {
            background: black;
        }

        .spell-difficulty .slider-handle {
            background: black;
        }

        /* Talents */

        .talent-list {
            min-height: 50px; /* Otherwise empty lists cannot receive an item */
        }

        .increased-talent {
            -webkit-text-fill-color: orangered;
        }

        /* Spell table */
        .spell-name {
            min-width: 300px;
        }

        .spell-list {
            min-width: 100px;
        }

        .spell-effect {
            min-width: 300px;
        }

        .spell-formula {
            min-width: 250px;
        }
    </style>

    <script src="node_modules/jquery/dist/jquery.min.js"></script>
    <script src="node_modules/popper.js/dist/umd/popper.min.js"></script>
    <script src="node_modules/popper.js/dist/umd/popper-utils.min.js"></script>
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="node_modules/mdbootstrap/js/mdb.min.js"></script>
    <script src="node_modules/bootstrap-slider/dist/bootstrap-slider.min.js"></script>
    <script src="node_modules/file-saver/dist/FileSaver.min.js"></script>
    <script src="node_modules/sortablejs/dist/sortable.umd.js"></script>
    <script src="node_modules/jquery-sortablejs/jquery-sortable.js"></script>
    <script src="node_modules/@fortawesome/fontawesome-free/js/all.min.js"></script>
</head>

<body>

<div class="container-fluid main-container">
    <!-- Basic information -->
    <div class="row form-row my-1 mt-2 md-form">
        <div class="col-sm-4">
            <input class="form-control" id="character-name" name="character-name" type="text" value="">
            <label for="character-name">Nom du personnage</label>
        </div>
        <div class="col-sm-4">
            <input class="form-control" id="race" name="race" type="text" value="">
            <label for="race">Race/Peuple</label>
        </div>
        <div class="col-sm-2 mt-3 text-center">
            PA non dépensés: <span id="remaining-adventure-points"></span>
        </div>
        <div class="col-sm-2">
            <input class="form-control" id="luck-points" name="character-name" type="number" value="0" min="0" max="3">
            <label for="luck-points">PC</label>
        </div>
    </div>
    <div class="row form-row my-1 md-form">
        <div class="col-sm-2">
            <label for="age">Âge</label>
            <input class="form-control" id="age" name="age" type="number" value="" min="0">
        </div>

        <div class="col-sm-2">
            <label for="gender">Sexe</label>
            <input class="form-control" id="gender" name="gender" type="text" value="">
        </div>

        <div class="col-sm-2">
            <label for="height">Taille (cm)</label>
            <input class="form-control" id="height" name="height" type="number" value="" min="1">
        </div>

        <div class="col-sm-2">
            <label for="weight">Poids (kg)</label>
            <input class="form-control" id="weight" name="weight" type="number" value="" min="1">
        </div>

        <div class="col-sm-4">
            <label for="work">Métier</label>
            <input class="form-control" id="work" name="work" type="text" value="">
        </div>
    </div>

    <!-- Components and means -->
    <div class="row my-1">
        <div class="table-responsive-xl col-lg-6">
            <table class="table table-hover my-1">
                <thead>
                <tr>
                    <th scope="col" class="align-middle">
                        <div class="text-right">Moyens</div>
                        Composantes
                    </th>
                    <th scope="col" class="align-middle md-form input-with-pre-icon">
                        <svg height="3em" width="2em" class="input-prefix">
                            <use xlink:href="#svg-perception"></use>
                        </svg>
                        <input class="form-control means text-center" id="perception" name="perception" type="number"
                               value="1" min="1" max="5" data-toggle="tooltip" data-placement="top" title="Perception">
                    </th>
                    <th scope="col" class="align-middle md-form input-with-pre-icon">
                        <svg height="3em" width="2em" class="input-prefix">
                            <use xlink:href="#svg-action"></use>
                        </svg>
                        <input class="form-control means text-center" id="action" name="action" type="number" value="1"
                               min="1" max="5" data-toggle="tooltip" data-placement="top" title="Action">
                    </th>
                    <th scope="col" class="align-middle md-form input-with-pre-icon">
                        <svg height="3em" width="2em" class="input-prefix">
                            <use xlink:href="#svg-desire"></use>
                        </svg>
                        <input class="form-control means text-center" id="desire" name="desire" type="number" value="1"
                               min="1" max="5" data-toggle="tooltip" data-placement="top" title="Désir">
                    </th>
                    <th scope="col" class="align-middle md-form input-with-pre-icon">
                        <svg height="3em" width="2em" class="input-prefix">
                            <use xlink:href="#svg-resistance"></use>
                        </svg>
                        <input class="form-control means text-center" id="resistance" name="resistance" type="number"
                               value="1" min="1" max="5" data-toggle="tooltip" data-placement="top" title="Résistance">
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <th scope="row" class="align-middle md-form input-with-pre-icon">
                        <svg height="3em" width="2em" class="input-prefix">
                            <use xlink:href="#svg-body"></use>
                        </svg>
                        <input class="form-control component text-center" id="body" name="body" type="number" value="3"
                               min="3" max="7" data-toggle="tooltip" data-placement="top" title="Corps">
                    </th>
                    <td class="align-middle text-center" id="body-perception" data-toggle="tooltip" data-html="true"
                        data-placement="right"
                        title="Voir, sentir, écouter;<br/>équilibre corporel;<br/>combat à distance"></td>
                    <td class="align-middle text-center" id="body-action" data-toggle="tooltip" data-html="true"
                        data-placement="right"
                        title="Action physique;<br/>dépense corporelle;<br/>combat au contact"></td>
                    <td class="align-middle text-center" id="body-desire" data-toggle="tooltip" data-html="true"
                        data-placement="right"
                        title="Surmonter la faim,<br/>le sommeil, les blessures;<br/>survivre"></td>
                    <td class="align-middle text-center" id="body-resistance" data-toggle="tooltip" data-html="true"
                        data-placement="right"
                        title="Résister à la faim, à la soif,<br/>aux maladies, à l'asphyxie"></td>
                </tr>
                <tr>
                    <th scope="row" class="align-middle md-form input-with-pre-icon">
                        <svg height="3em" width="2em" class="input-prefix">
                            <use xlink:href="#svg-instincts"></use>
                        </svg>
                        <input class="form-control component text-center" id="instincts" name="instincts" type="number"
                               value="3" min="3" max="7" data-toggle="tooltip" data-placement="top" title="Instincts">
                    </th>
                    <td class="align-middle text-center" id="instincts-perception" data-toggle="tooltip"
                        data-html="true" data-placement="right"
                        title="Deviner une réaction;<br/>6e sens;<br/>se laisser guider par l'intuition"></td>
                    <td class="align-middle text-center" id="instincts-action" data-toggle="tooltip"
                        data-html="true" data-placement="right"
                        title="Réagir d'instinct;<br/>convaincre par la convoitise"></td>
                    <td class="align-middle text-center" id="instincts-desire" data-toggle="tooltip"
                        data-html="true" data-placement="right"
                        title="Imposer sa personalité;<br/>exorciser, réaliser ses rêves"></td>
                    <td class="align-middle text-center" id="instincts-resistance" data-toggle="tooltip"
                        data-html="true" data-placement="right"
                        title="Laisser la 'bête' (violence, plaisir) au fond de soi"></td>
                </tr>
                <tr>
                    <th scope="row" class="align-middle md-form input-with-pre-icon">
                        <svg height="3em" width="2em" class="input-prefix">
                            <use xlink:href="#svg-heart"></use>
                        </svg>
                        <input class="form-control component text-center" id="heart" name="heart" type="number"
                               value="3" min="3" max="7" data-toggle="tooltip" data-placement="top" title="Cœur">
                    </th>
                    <td class="align-middle text-center" id="heart-perception" data-toggle="tooltip" data-html="true"
                        data-placement="right" title="Connaître les sentiments;<br/>psychologie"></td>
                    <td class="align-middle text-center" id="heart-action" data-toggle="tooltip" data-html="true"
                        data-placement="right" title="Se faire aimer;<br/>convaincre par la passion"></td>
                    <td class="align-middle text-center" id="heart-desire" data-toggle="tooltip" data-html="true"
                        data-placement="right"
                        title="Avoir la foi;<br/>créer la paix, la confiance et les miracles"></td>
                    <td class="align-middle text-center" id="heart-resistance" data-toggle="tooltip" data-html="true"
                        data-placement="right" title="Résister à la séduction, à la pitié, à la misère"></td>
                </tr>
                <tr>
                    <th scope="row" class="align-middle md-form input-with-pre-icon">
                        <svg height="3em" width="2em" class="input-prefix">
                            <use xlink:href="#svg-mind"></use>
                        </svg>
                        <input class="form-control component text-center" id="mind" name="mind" type="number" value="3"
                               min="3" max="7" data-toggle="tooltip" data-placement="top" title="Esprit">
                    </th>
                    <td class="align-middle text-center" id="mind-perception" data-toggle="tooltip" data-html="true"
                        data-placement="right" title="Comprendre un problème;<br/>analyser une situation"></td>
                    <td class="align-middle text-center" id="mind-action" data-toggle="tooltip" data-html="true"
                        data-placement="right" title="Raisonner, calculer, résoudre;<br/>Agir par la réflexion"></td>
                    <td class="align-middle text-center" id="mind-desire" data-toggle="tooltip" data-html="true"
                        data-placement="right" title="Se raisonner, se détacher des sentiments, inventer"></td>
                    <td class="align-middle text-center" id="mind-resistance" data-toggle="tooltip" data-html="true"
                        data-placement="right" title="Rester logique, d'esprit libre;<br/>résister à l'hypnotisme"></td>
                </tr>
                </tbody>
            </table>
        </div>

        <!-- Realms -->
        <div class="col-md-2 col-sm-3 mt-4 offset-lg-1">
            <div class="row m-0"><b>Règnes</b></div>
            <div class="row m-0">
                <div class="align-middle md-form input-with-pre-icon col-12 m-0" data-toggle="tooltip"
                     data-placement="right" title="Minéral">
                    <svg height="3em" width="2em" class="input-prefix">
                        <use xlink:href="#svg-mineral"></use>
                    </svg>
                    <label for="mineral" hidden></label>
                    <input class="form-control realm text-center" id="mineral" name="mineral" type="number" value="0"
                           min="0" max="3">
                </div>
            </div>
            <div class="row m-0">
                <div class="align-middle md-form input-with-pre-icon col-12 m-0" data-toggle="tooltip"
                     data-placement="right" title="Végétal">
                    <svg height="3em" width="2em" class="input-prefix">
                        <use xlink:href="#svg-vegetal"></use>
                    </svg>
                    <label for="vegetal" hidden></label>
                    <input class="form-control realm text-center" id="vegetal" name="vegetal" type="number" value="0"
                           min="0" max="3">
                </div>
            </div>
            <div class="row m-0">
                <div class="align-middle md-form input-with-pre-icon col-12 m-0" data-toggle="tooltip"
                     data-placement="right" title="Animal">
                    <svg height="3em" width="2em" class="input-prefix">
                        <use xlink:href="#svg-animal"></use>
                    </svg>
                    <label for="animal" hidden></label>
                    <input class="form-control realm text-center" id="animal" name="animal" type="number" value="0"
                           min="0" max="3">
                </div>
            </div>
            <div class="row m-0">
                <div class="align-middle md-form input-with-pre-icon col-12 m-0" data-toggle="tooltip"
                     data-placement="right" title="Humanoïde">
                    <svg height="3em" width="2em" class="input-prefix">
                        <use xlink:href="#svg-humanoid"></use>
                    </svg>
                    <label for="humanoid" hidden></label>
                    <input class="form-control realm text-center" id="humanoid" name="humanoid" type="number" value="0"
                           min="0" max="3">
                </div>
            </div>
            <div class="row m-0">
                <div class="align-middle md-form input-with-pre-icon col-12 m-0" data-toggle="tooltip"
                     data-placement="right" title="Mécanique">
                    <svg height="3em" width="2em" class="input-prefix">
                        <use xlink:href="#svg-mechanical"></use>
                    </svg>
                    <label for="mechanical" hidden></label>
                    <input class="form-control realm text-center" id="mechanical" name="mechanic" type="number"
                           value="0" min="0" max="3">
                </div>
            </div>
            <div class="row m-0">
                <div class="align-middle md-form input-with-pre-icon col-12 m-0" data-toggle="tooltip"
                     data-placement="right" title="Néant">
                    <svg height="3em" width="2em" class="input-prefix">
                        <use xlink:href="#svg-void"></use>
                    </svg>
                    <label for="void" hidden></label>
                    <input class="form-control realm text-center" id="void" name="void" type="number" value="-1"
                           min="-1" max="-1" disabled>
                </div>
            </div>
        </div>

        <!-- Energies -->
        <div class="col-md-2 col-sm-3 mt-4 offset-md-1">
            <div class="row m-0"><b>Énergies</b></div>
            <div class="row m-0">
                <div class="align-middle md-form input-with-pre-icon col-12 m-0" data-toggle="tooltip"
                     data-placement="left" title="Puissance">
                    <svg height="3em" width="2em" class="input-prefix">
                        <use xlink:href="#svg-power"></use>
                    </svg>
                    <label for="power" hidden></label>
                    <input class="form-control energy text-center" id="power" name="power" type="number" value="0"
                           min="0" max="3">
                </div>
            </div>
            <div class="row m-0">
                <div class="align-middle md-form input-with-pre-icon col-12 m-0" data-toggle="tooltip"
                     data-placement="left" title="Rapidité">
                    <svg height="3em" width="2em" class="input-prefix">
                        <use xlink:href="#svg-speed"></use>
                    </svg>
                    <label for="speed" hidden></label>
                    <input class="form-control energy text-center" id="speed" name="speed" type="number" value="0"
                           min="0" max="3">
                </div>
            </div>
            <div class="row m-0">
                <div class="align-middle md-form input-with-pre-icon col-12 m-0" data-toggle="tooltip"
                     data-placement="left" title="Précision">
                    <svg height="3em" width="2em" class="input-prefix">
                        <use xlink:href="#svg-precision"></use>
                    </svg>
                    <label for="precision" hidden></label>
                    <input class="form-control energy text-center" id="precision" name="precision" type="number"
                           value="0" min="0" max="3">
                </div>
            </div>
        </div>
    </div>

    <ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" data-toggle="tab" href="#status-tab" role="tab" aria-controls="home"
               aria-selected="true">
                Status
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#talent-tab" role="tab" aria-controls="profile"
               aria-selected="false">
                Talents
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#magic-tab" role="tab" aria-controls="profile"
               aria-selected="false">
                Magie/Ki
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#equipment-tab" role="tab" aria-controls="profile"
               aria-selected="false">
                Équipement
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-toggle="tab" href="#adventure-points-tab" role="tab" aria-controls="profile"
               aria-selected="false">
                PA
            </a>
        </li>
    </ul>

    <div class="tab-content">
        <div id="status-tab" class="tab-pane fade show active row">
            <div class="row container offset-xl-3 offset-lg-2 offset-md-1">
                <!-- Localized HP and protection -->
                <div class="col-lg-5 col-md-7 col-sm-12 col-xs-12">
                    <div class="row mt-1">
                        <div class="offset-4 col-4 align-middle text-center">
                            <div class="md-form form-sm m-0 align-middle input-with-pre-icon">
                                <svg height="2em" width="2em" class="input-prefix">
                                    <use xlink:href="#svg-helmet"></use>
                                </svg>
                                <input type="number" id="armor-head"
                                       class="armor form-control form-control-sm text-center"
                                       min="0" value="0">
                                <label for="armor-head" hidden></label>
                            </div>
                            <div data-toggle="tooltip" data-html="true" data-placement="right" title="Touché sur 1">
                                <svg height="5em" width="5em">
                                    <use xlink:href="#svg-head"></use>
                                </svg>
                            </div>
                            <div>
                                <label for="hp-head" hidden></label>
                                <input id="hp-head" class="hp input-slider" data-slider-id="hp-head-slider" type="text"
                                       data-slider-min="0" data-slider-max="3" data-slider-step="1"
                                       data-slider-value="3"
                                       data-slider-handle="custom"/>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-4 align-middle text-center pr-0">
                            <div class="md-form form-sm m-0 align-middle input-with-pre-icon">
                                <svg height="2em" width="2em" class="input-prefix">
                                    <use xlink:href="#svg-right-gauntlet"></use>
                                </svg>
                                <input type="number" id="armor-right-arm"
                                       class="armor form-control form-control-sm text-center" min="0" value="0">
                                <label for="armor-right-arm" hidden></label>
                            </div>
                            <label for="hp-right-arm" hidden></label>
                            <input id="hp-right-arm" class="hp input-slider" data-slider-id="hp-right-arm-slider"
                                   type="text" data-slider-min="0" data-slider-max="3" data-slider-step="1"
                                   data-slider-value="3" data-slider-handle="custom" data-slider-orientation="vertical"
                                   data-slider-reversed="true"/>
                            <svg height="5em" width="5em" data-toggle="tooltip" data-html="true" data-placement="top"
                                 title="Touché sur 4 au contact<br/>Touché sur 3 à distance">
                                <use xlink:href="#svg-right-hand"></use>
                            </svg>
                        </div>
                        <div class="col-4 align-middle text-center">
                            <div class="md-form form-sm m-0 align-middle input-with-pre-icon">
                                <svg height="2em" width="2em" class="input-prefix">
                                    <use xlink:href="#svg-chest-armor"></use>
                                </svg>
                                <input type="number" id="armor-trunk"
                                       class="armor form-control form-control-sm text-center"
                                       min="0" value="0">
                                <label for="armor-trunk" hidden></label>
                            </div>
                            <div data-toggle="tooltip" data-html="true" data-placement="top"
                                 title="Touché sur 2 ou 3 au contact<br/>Touché sur 2 à distance">
                                <svg height="5em" width="5em">
                                    <use xlink:href="#svg-chest"></use>
                                </svg>
                            </div>
                            <label for="hp-trunk" hidden></label>
                            <input id="hp-trunk" class="hp input-slider" data-slider-id="hp-trunk-slider" type="text"
                                   data-slider-min="0" data-slider-max="3" data-slider-step="1" data-slider-value="3"
                                   data-slider-handle="custom"/>
                        </div>
                        <div class="col-4 align-middle text-center pl-0">
                            <div class="md-form form-sm m-0 align-middle input-with-pre-icon">
                                <svg height="2em" width="2em" class="input-prefix">
                                    <use xlink:href="#svg-left-gauntlet"></use>
                                </svg>
                                <input type="number" id="armor-left-arm"
                                       class="armor form-control form-control-sm text-center" min="0" value="0">
                                <label for="armor-left-arm" hidden></label>
                            </div>
                            <svg height="5em" width="5em" data-toggle="tooltip" data-html="true" data-placement="top"
                                 title="Touché sur 5 au contact<br/>Touché sur 4 à distance">
                                <use xlink:href="#svg-left-hand"></use>
                            </svg>
                            <label for="hp-left-arm" hidden></label>
                            <input id="hp-left-arm" class="hp input-slider" data-slider-id="hp-left-arm-slider"
                                   type="text"
                                   data-slider-min="0" data-slider-max="3" data-slider-step="1" data-slider-value="3"
                                   data-slider-handle="custom" data-slider-orientation="vertical"
                                   data-slider-reversed="true"/>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="offset-2 col-4 align-middle text-center px-0">
                            <label for="hp-right-leg" hidden></label>
                            <input id="hp-right-leg" class="hp input-slider" data-slider-id="hp-right-leg-slider"
                                   type="text" data-slider-min="0" data-slider-max="3" data-slider-step="1"
                                   data-slider-value="3" data-slider-handle="custom" data-slider-orientation="vertical"
                                   data-slider-reversed="true"/>
                            <svg height="5em" width="5em" data-toggle="tooltip" data-html="true" data-placement="top"
                                 title="Touché sur 6p au contact<br/>Touché sur 5 à distance">
                                <use xlink:href="#svg-right-foot"></use>
                            </svg>
                            <div class="md-form form-sm m-0 align-middle input-with-pre-icon">
                                <svg height="2em" width="2em" class="input-prefix">
                                    <use xlink:href="#svg-right-leg-armor"></use>
                                </svg>
                                <input type="number" id="armor-right-leg"
                                       class="armor form-control form-control-sm text-center" min="0" value="0">
                                <label for="armor-right-leg" hidden></label>
                            </div>
                        </div>
                        <div class="offset-lg-0 offset-md-1 col-4 align-middle text-center px-0">
                            <svg height="5em" width="5em" data-toggle="tooltip" data-html="true" data-placement="top"
                                 title="Touché sur 6i au contact<br/>Touché sur 6 à distance">
                                <use xlink:href="#svg-left-foot"></use>
                            </svg>
                            <label for="hp-left-leg" hidden></label>
                            <input id="hp-left-leg" class="hp input-slider" data-slider-id="hp-left-leg-slider"
                                   type="text"
                                   data-slider-min="0" data-slider-max="3" data-slider-step="1" data-slider-value="3"
                                   data-slider-handle="custom" data-slider-orientation="vertical"
                                   data-slider-reversed="true"/>
                            <div class="md-form form-sm m-0 align-middle input-with-pre-icon">
                                <svg height="2em" width="2em" class="input-prefix">
                                    <use xlink:href="#svg-left-leg-armor"></use>
                                </svg>
                                <input type="number" id="armor-left-leg"
                                       class="armor form-control form-control-sm text-center" min="0" value="0">
                                <label for="armor-left-leg" hidden></label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Protection summary, unease, breath and psychic balance -->
                <div class="offset-1 col-lg-3 col-md-4 mt-5 align-middle">
                    <div class="row mb-5">
                        Malus de protection:<span id="armor-penalty">0</span>
                    </div>
                    <div class="row">
                        <label for="unease">Malaise (M):<span id="unease-text">pas de malus</span></label>
                    </div>
                    <div class="row mb-5">
                        <input id="unease" data-slider-id="unease-slider" type="text" data-slider-min="0"
                               data-slider-max="4" data-slider-step="1" data-slider-value="0" class="input-slider"
                               data-slider-tooltip-position="bottom"/>
                    </div>
                    <div class="row clickable btn-link" data-toggle="modal" data-target="#breath-max-update">
                        <label class="clickable" for="breath">Souffle (PS)</label>
                    </div>
                    <div class="row mb-5">
                        <input id="breath" data-slider-id="breath-slider" type="text" data-slider-min="0"
                               data-slider-max="4" data-slider-step="1" data-slider-value="4"
                               data-slider-reversed="true"
                               class="input-slider" data-slider-handle="custom" data-slider-tooltip-position="bottom"/>
                    </div>
                    <div class="row clickable btn-link" data-toggle="modal" data-target="#psychic-max-update">
                        <label class="clickable" for="psychic">Équilibre Psychique (EP)</label>
                    </div>
                    <div class="row">
                        <input id="psychic" data-slider-id="psychic-slider" type="text" data-slider-min="0"
                               data-slider-max="4" data-slider-step="1" data-slider-value="4"
                               data-slider-reversed="true"
                               class="input-slider" data-slider-handle="custom" data-slider-tooltip-position="bottom"/>
                    </div>
                    <div class="row">
                        <label for="rest">Jours de repos</label>
                    </div>
                    <div class="row">
                        <input id="rest" data-slider-id="rest-slider" type="text" data-slider-min="0"
                               data-slider-max="7"
                               data-slider-step="1" data-slider-value="0" class="input-slider"
                               data-slider-handle="custom" data-slider-tooltip-position="bottom"/>
                    </div>
                </div>
            </div>
        </div>

        <!-- Talents -->
        <div id="talent-tab" class="tab-pane fade row my-1 container-fluid m-0 pr-0">
            <div class="row my-3 justify-content-center">
                <div class="col-md-3">
                    <div id="talents_1" class="list-group talent-list border border-light rounded-lg">
                        <div class="nav-header disabled text-center"><b>1</b></div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div id="talents_2" class="list-group talent-list border border-light rounded-lg">
                        <div class="nav-header disabled text-center"><b>2</b></div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div id="talents_3" class="list-group talent-list border border-light rounded-lg">
                        <div class="nav-header disabled text-center"><b>3</b></div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-3">
                    <div id="talents_x" class="list-group talent-list border border-light rounded-lg">
                        <div class="nav-header disabled text-center"><b>X</b></div>
                        <div id="talent_x" class="talent list-group-item p-0 m-0" data-toggle="tooltip"
                             data-html="true" data-placement="right" title="" hidden>
                            <div class="md-form m-0 p-0 input-with-post-icon">
                                <i class="fas fa-arrows-alt prefix mt-2 ml-1" style="font-size: 1.5em;"></i>
                                <input id="x-name" class="form-control" type="text" value="">
                                <label for="x-name"></label>
                                <i class="input-prefix talent-origin small"></i>
                            </div>
                        </div>
                    </div>
                    <button id="add-talent-x" class="btn btn-light"><i class="fas fa-plus"></i></button>
                </div>

                <div class="col-md-3">
                    <div id="talents_-4" class="list-group talent-list border border-light rounded-lg">
                        <div class="nav-header disabled text-center"><b>-4</b></div>
                        <div id="talent_-4" class="talent list-group-item p-0 m-0" data-toggle="tooltip"
                             data-html="true" data-placement="right" title="" hidden>
                            <div class="md-form m-0 p-0 input-with-post-icon">
                                <i class="fas fa-arrows-alt prefix mt-2 ml-1" style="font-size: 1.5em;"></i>
                                <input id="-4-name" class="form-control" type="text" value="">
                                <label for="-4-name"></label>
                                <i class="input-prefix talent-origin small"></i>
                            </div>
                        </div>
                    </div>
                    <button id="add-talent--4" class="btn btn-light"><i class="fas fa-plus"></i></button>
                </div>

                <div class="col-md-3">
                    <div id="talents_-2" class="list-group talent-list border border-light rounded-lg">
                        <div class="nav-header disabled text-center"><b>-2</b></div>
                        <div id="talent_-2" class="talent list-group-item p-0 m-0" data-toggle="tooltip"
                             data-html="true" data-placement="right" title="" hidden>
                            <div class="md-form m-0 p-0 input-with-post-icon">
                                <i class="fas fa-arrows-alt prefix mt-2 ml-1" style="font-size: 1.5em;"></i>
                                <input id="-2-name" class="form-control" type="text" value="">
                                <label for="-2-name"></label>
                                <i class="input-prefix talent-origin small"></i>
                            </div>
                        </div>
                    </div>
                    <button id="add-talent--2" class="btn btn-light"><i class="fas fa-plus"></i></button>
                </div>

                <div class="col-md-3">
                    <div id="talents_0" class="list-group talent-list border border-light rounded-lg">
                        <div class="nav-header disabled text-center"><b>0</b></div>
                        <div id="talent_0" class="talent list-group-item p-0 m-0" data-toggle="tooltip"
                             data-html="true" data-placement="right" title="" hidden>
                            <div class="md-form m-0 p-0 input-with-post-icon">
                                <i class="fas fa-arrows-alt prefix mt-2 ml-1" style="font-size: 1.5em;"></i>
                                <input id="0-name" class="form-control" type="text" value="">
                                <label for="0-name"></label>
                                <i class="input-prefix talent-origin small"></i>
                            </div>
                        </div>
                    </div>
                    <button id="add-talent-0" class="btn btn-light"><i class="fas fa-plus"></i></button>
                </div>
            </div>
        </div>

        <!-- Magic and Ki -->
        <div id="magic-tab" class="tab-pane fade row my-1 container-fluid">
            <!-- Magical energies and Ki -->
            <div class="row mt-2 ml-1"><b>Énergies magiques</b></div>
            <div class="row form-row mt-2 md-form p-0 m-0">
                <div class="col-md-2">
                    <label for="water">Eau</label>
                    <input class="energy form-control" id="water" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="earth">Terre</label>
                    <input class="energy form-control" id="earth" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="fire">Feu</label>
                    <input class="energy form-control" id="fire" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="air">Air</label>
                    <input class="energy form-control" id="air" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="fog">Brume/Illusion</label>
                    <input class="energy form-control" id="fog" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="mud">Boue</label>
                    <input class="energy form-control" id="mud" type="number" value="" min="0" max="3">
                </div>
            </div>
            <div class="row form-row md-form p-0 m-0">
                <div class="col-md-2">
                    <label for="lightning">Électricité</label>
                    <input class="energy form-control" id="lightning" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="metal">Métal</label>
                    <input class="energy form-control" id="metal" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="healing">Guérison</label>
                    <input class="energy form-control" id="healing" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="necromancy">Nécromancie</label>
                    <input class="energy form-control" id="necromancy" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="invocation">Invocation</label>
                    <input class="energy form-control" id="invocation" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="protection">Protection</label>
                    <input class="energy form-control" id="protection" type="number" value="" min="0" max="3">
                </div>
            </div>
            <div class="row form-row md-form p-0 m-0">
                <div class="col-md-2">
                    <label for="divination">Divination</label>
                    <input class="energy form-control" id="divination" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="enchantment">Enchantement</label>
                    <input class="energy form-control" id="enchantment" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="charm">Charme</label>
                    <input class="energy form-control" id="charm" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="voodoo">Vaudou</label>
                    <input class="energy form-control" id="voodoo" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="spiritualism">Spiritisme</label>
                    <input class="energy form-control" id="spiritualism" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="metamorphosis">Métamorphose</label>
                    <input class="energy form-control" id="metamorphosis" type="number" value="" min="0" max="3">
                </div>
            </div>
            <div class="row form-row md-form p-0 m-0">
                <div class="col-md-2">
                    <label for="witchcraft">Sorcellerie</label>
                    <input class="energy form-control" id="witchcraft" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="time">Temps</label>
                    <input class="energy form-control" id="time" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="shamanism">Chamanisme</label>
                    <input class="energy form-control" id="shamanism" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="runes">Runes</label>
                    <input class="energy form-control" id="runes" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="name-magic">Noms</label>
                    <input class="energy form-control" id="name-magic" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="hermetic">Hermétique</label>
                    <input class="energy form-control" id="hermetic" type="number" value="" min="0" max="3">
                </div>
            </div>
            <div class="row form-row md-form p-0 m-0">
                <div class="col-md-2">
                    <label for="meta-magic">Métamagie</label>
                    <input class="energy form-control" id="meta-magic" type="number" value="" min="0" max="3">
                </div>

                <div class="offset-md-6 col-md-2">
                    <label for="divine">Divin</label>
                    <input class="energy form-control" id="divine" type="number" value="" min="0" max="3">
                </div>

                <div class="col-md-2">
                    <label for="ki">Ki</label>
                    <input class="energy form-control" id="ki" type="number" value="" min="0" max="3">
                </div>
            </div>

            <!-- Black magic & misc -->
            <div class="row mt-2 ml-1"><b>Compteurs</b></div>
            <div class="row form-row md-form mt-1 p-0 m-0">
                <div class="col-md-2">
                    <label for="black-magic">Magie noire</label>
                    <input class="form-control" id="black-magic" type="number" value="" min="0">
                </div>

                <div class="col-md-2">
                    <label for="malemagite">Malemagite</label>
                    <input class="form-control" id="malemagite" type="number" value="" min="0">
                </div>
            </div>

            <!-- Spells -->
            <div class="row mt-2 ml-1"><b>Sorts</b></div>
            <div class="table-responsive-xl col-12">
                <table class="table table-hover my-1">
                    <thead>
                    <tr>
                        <th scope="col" class="col-3">Nom</th>
                        <th scope="col" class="col-2">Liste</th>
                        <th scope="col" class="col-1 text-center">Niveau</th>
                        <th scope="col" class="col-3 text-center">Formule</th>
                        <th scope="col" class="col-2 text-center">Difficulté</th>
                        <th scope="col" class="col-1 text-center">Valeur</th>
                        <th scope="col" class="col-1 text-center">Temps</th>
                        <th scope="col" class="col-1 text-center">Distance</th>
                        <th scope="col" class="col-3">Effet</th>
                    </tr>
                    </thead>
                    <tbody id="spell-table">
                    <tr id="spell-0">
                        <td class="md-form my-0 py-0 align-middle">
                            <label for="spell-0-name"></label>
                            <input id="spell-0-name" class="spell-name form-control" type="text" value="">
                        </td>
                        <td class="md-form my-0 py-0 align-middle">
                            <label for="spell-0-list"></label>
                            <input id="spell-0-list" class="spell-list form-control" type="text" value="">
                        </td>
                        <td class="md-form my-0 py-0 align-middle">
                            <input id="spell-0-level" class="spell-level form-control text-center"
                                   type="number" value="" min="1" max="3">
                            <label for="spell-0-level"></label>
                        </td>
                        <td class="my-0 py-0 spell-formula align-middle">
                            <div class="row">
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" class="custom-control-input spell-formula-elem"
                                           id="spell-0-body" name="spell-0-component">
                                    <label class="custom-control-label" for="spell-0-body">
                                        <svg height="1em" width="1em" class="input-prefix">
                                            <use xlink:href="#svg-body"></use>
                                        </svg>
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" class="custom-control-input spell-formula-elem"
                                           id="spell-0-instincts" name="spell-0-component">
                                    <label class="custom-control-label" for="spell-0-instincts">
                                        <svg height="1em" width="1em" class="input-prefix">
                                            <use xlink:href="#svg-instincts"></use>
                                        </svg>
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" class="custom-control-input spell-formula-elem"
                                           id="spell-0-heart" name="spell-0-component">
                                    <label class="custom-control-label" for="spell-0-heart">
                                        <svg height="1em" width="1em" class="input-prefix">
                                            <use xlink:href="#svg-heart"></use>
                                        </svg>
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" class="custom-control-input spell-formula-elem"
                                           id="spell-0-mind" name="spell-0-component">
                                    <label class="custom-control-label" for="spell-0-mind">
                                        <svg height="1em" width="1em" class="input-prefix">
                                            <use xlink:href="#svg-mind"></use>
                                        </svg>
                                    </label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" class="custom-control-input spell-formula-elem"
                                           id="spell-0-perception" name="spell-0-means">
                                    <label class="custom-control-label" for="spell-0-perception">
                                        <svg height="1em" width="1em" class="input-prefix">
                                            <use xlink:href="#svg-perception"></use>
                                        </svg>
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" class="custom-control-input spell-formula-elem"
                                           id="spell-0-action" name="spell-0-means">
                                    <label class="custom-control-label" for="spell-0-action">
                                        <svg height="1em" width="1em" class="input-prefix">
                                            <use xlink:href="#svg-action"></use>
                                        </svg>
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" class="custom-control-input spell-formula-elem"
                                           id="spell-0-desire" name="spell-0-means">
                                    <label class="custom-control-label" for="spell-0-desire">
                                        <svg height="1em" width="1em" class="input-prefix">
                                            <use xlink:href="#svg-desire"></use>
                                        </svg>
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" class="custom-control-input spell-formula-elem"
                                           id="spell-0-resistance" name="spell-0-means">
                                    <label class="custom-control-label" for="spell-0-resistance">
                                        <svg height="1em" width="1em" class="input-prefix">
                                            <use xlink:href="#svg-resistance"></use>
                                        </svg>
                                    </label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" class="custom-control-input spell-formula-elem"
                                           id="spell-0-mineral" name="spell-0-realm">
                                    <label class="custom-control-label" for="spell-0-mineral">
                                        <svg height="1em" width="1em" class="input-prefix">
                                            <use xlink:href="#svg-mineral"></use>
                                        </svg>
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" class="custom-control-input spell-formula-elem"
                                           id="spell-0-vegetal" name="spell-0-realm">
                                    <label class="custom-control-label" for="spell-0-vegetal">
                                        <svg height="1em" width="1em" class="input-prefix">
                                            <use xlink:href="#svg-vegetal"></use>
                                        </svg>
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" class="custom-control-input spell-formula-elem"
                                           id="spell-0-animal" name="spell-0-realm">
                                    <label class="custom-control-label" for="spell-0-animal">
                                        <svg height="1em" width="1em" class="input-prefix">
                                            <use xlink:href="#svg-animal"></use>
                                        </svg>
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" class="custom-control-input spell-formula-elem"
                                           id="spell-0-humanoid" name="spell-0-realm">
                                    <label class="custom-control-label" for="spell-0-humanoid">
                                        <svg height="1em" width="1em" class="input-prefix">
                                            <use xlink:href="#svg-humanoid"></use>
                                        </svg>
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" class="custom-control-input spell-formula-elem"
                                           id="spell-0-mechanical" name="spell-0-realm">
                                    <label class="custom-control-label" for="spell-0-mechanical">
                                        <svg height="1em" width="1em" class="input-prefix">
                                            <use xlink:href="#svg-mechanical"></use>
                                        </svg>
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" class="custom-control-input spell-formula-elem"
                                           id="spell-0-void" name="spell-0-realm">
                                    <label class="custom-control-label" for="spell-0-void">
                                        <svg height="1em" width="1em" class="input-prefix">
                                            <use xlink:href="#svg-void"></use>
                                        </svg>
                                    </label>
                                </div>
                            </div>
                        </td>
                        <td class="spell-difficulty my-0 py-0 align-middle">
                            <div class="row">
                                <div class="text-center col-12">
                                    <label for="spell-0-difficulty-input" id="spell-0-difficulty">0</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="text-center col-12">
                                    <input id="spell-0-difficulty-input" data-slider-id="spell-0-difficulty-slider"
                                           type="text" data-slider-min="0" data-slider-max="30" data-slider-step="1"
                                           data-slider-value="0" class="input-slider spell-difficulty-input"
                                           data-slider-tooltip-position="bottom"/>
                                </div>
                            </div>
                        </td>
                        <td class="my-0 py-0 text-center align-middle">
                            <div id="spell-0-value" class="spell-value"></div>
                        </td>
                        <td class="md-form my-0 py-0 align-middle">
                            <input id="spell-0-time" class="spell-time form-control text-center" type="text">
                            <label for="spell-0-time"></label>
                        </td>
                        <td class="md-form my-0 py-0 align-middle">
                            <input id="spell-0-distance" class="spell-distance form-control text-center" type="text">
                            <label for="spell-0-distance"></label>
                        </td>
                        <td class="md-form my-0 py-0 align-middle">
                            <input id="spell-0-effect" class="spell-effect form-control" type="text">
                            <label for="spell-0-effect"></label>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="row ml-2">
                <button id="add-spell" class="btn btn-success"><i class="fas fa-plus"></i></button>
            </div>
        </div>

        <!-- Equipment -->
        <div id="equipment-tab" class="tab-pane fade row my-1 container-fluid">
            <!-- Money -->
            <div class="row mt-2 ml-1"><b>Fortune</b></div>
            <div class="row form-row mt-2 md-form p-0 m-0">
                <div class="col-sm-4">
                    <label for="gold-coins">Soleils</label>
                    <input class="form-control" id="gold-coins" type="number" value="0" min="0">
                </div>

                <div class="col-sm-4">
                    <label for="silver-coins">Lunes</label>
                    <input class="form-control" id="silver-coins" type="number" value="0" min="0">
                </div>

                <div class="col-sm-4">
                    <label for="copper-coins">Besins</label>
                    <input class="form-control" id="copper-coins" type="number" value="0" min="0">
                </div>
            </div>

            <!-- Focus -->
            <div class="row mt-2 ml-1"><b>Focus</b></div>
            <div class="table-responsive-xl col-12">
                <table class="table table-hover my-1">
                    <thead>
                    <tr>
                        <th scope="col" class="col-8" style="width: 75%; min-width: 300px">Aspect</th>
                        <th scope="col" class="col-2 text-center" style="width: 12.5%">Charge actuelle</th>
                        <th scope="col" class="col-2 text-center" style="width: 12.5%">Charge maximum</th>
                    </tr>
                    </thead>
                    <tbody id="focus-table">
                    <tr id="focus-0">
                        <td class="md-form my-0 py-0 align-middle">
                            <label for="focus-0-name"></label>
                            <input id="focus-0-name" class="focus-name form-control" type="text" value="">
                        </td>
                        <td class="md-form my-0 py-0 align-middle">
                            <input id="focus-0-charge" class="focus-charge form-control text-center" type="number"
                                   value="" min="0">
                            <label for="focus-0-charge"></label>
                        </td>
                        <td class="md-form my-0 py-0 align-middle">
                            <input id="focus-0-max" class="focus-max form-control text-center" type="number"
                                   value="" min="0">
                            <label for="focus-0-max"></label>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="row ml-2">
                <button id="add-focus" class="btn btn-success rounded"><i class="fas fa-plus"></i></button>
            </div>

            <!-- Magical equipment -->
            <div class="row mt-2 ml-1"><b>Équipement magique</b></div>
            <div class="table-responsive-xl col-12">
                <table class="table table-hover my-1">
                    <thead>
                    <tr>
                        <th scope="col" class="col-3" style="width: 20%; min-width: 200px">Nom</th>
                        <th scope="col" class="col-2 text-center" style="width: 10%;">Nbr utilisations</th>
                        <th scope="col" class="col-7" style="width: 70%; min-width: 500px">Fonctionnement</th>
                    </tr>
                    </thead>
                    <tbody id="magical-equipment-table">
                    <tr id="magical-equipment-0">
                        <td class="md-form my-0 py-0 align-middle">
                            <label for="magical-equipment-0-name"></label>
                            <input id="magical-equipment-0-name" class="magical-equipment-name form-control" type="text"
                                   value="">
                        </td>
                        <td class="md-form my-0 py-0 align-middle">
                            <input id="magical-equipment-0-charge"
                                   class="magical-equipment-charge form-control text-center" type="text">
                            <label for="magical-equipment-0-charge"></label>
                        </td>
                        <td class="md-form my-0 py-0 align-middle">
                            <label for="magical-equipment-0-details"></label>
                            <input id="magical-equipment-0-details" class="magical-equipment-details form-control"
                                   type="text" value="">
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="row ml-2">
                <button id="add-magical-equipment" class="btn btn-success rounded"><i class="fas fa-plus"></i></button>
            </div>

            <!-- Regular Equipment -->
            <div class="row mt-2 ml-1"><b>Équipement</b></div>
            <div class="table-responsive-xl col-12">
                <table class="table table-hover my-1">
                    <thead>
                    <tr>
                        <th scope="col" class="col-2" style="width: 10%">Quantité</th>
                        <th scope="col" class="col-8" style="width: 80%; min-width: 300px">Description</th>
                        <th scope="col" class="col-2 text-center" style="width: 10%">Prix à l'unité (Besins)</th>
                    </tr>
                    </thead>
                    <tbody id="equipment-table">
                    <tr id="equipment-0">
                        <td class="md-form my-0 py-0 align-middle">
                            <input id="equipment-0-quantity" class="equipment quantity form-control text-center"
                                   type="number" value="0" min="0">
                            <label for="equipment-0-quantity"></label>
                        </td>
                        <td class="md-form my-0 py-0 align-middle">
                            <label for="equipment-0-name"></label>
                            <input id="equipment-0-name" class="equipment-name form-control" type="text" value="">
                        </td>
                        <td class="md-form my-0 py-0 align-middle">
                            <input id="equipment-0-price" class="equipment-price form-control text-center"
                                   type="number" value="0" min="0">
                            <label for="equipment-0-price"></label>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="row ml-2">
                <button id="add-equipment" class="btn btn-success rounded"><i class="fas fa-plus"></i></button>
            </div>
        </div>

        <!-- Adventure Point Tracking -->
        <div id="adventure-points-tab" class="tab-pane fade row my-1 container-fluid">
            <!-- Adventure points total -->
            <div class="row form-row mt-2 md-form p-0 m-0">
                <div class="col-12">
                    <label for="adventure-points">Nombre total de PA reçus (création comprise)</label>
                    <input class="form-control adventure-points-setting" id="adventure-points" type="number" value="0"
                           min="0">
                </div>
            </div>
            <div class="row mt-2 ml-1">
                Le MD peut accorder des réductions sur le coût des compétences.
                La somme des PAs sauvés par ce moyen peut être inscrite ci-dessous:
            </div>
            <div class="row form-row mt-2 md-form p-0 m-0">
                <div class="col-12">
                    <label for="adventure-points-discount">Réductions sur le coût des compétences</label>
                    <input class="form-control adventure-points-setting" id="adventure-points-discount" type="number"
                           value="0" min="0">
                </div>
            </div>

            <div class="row mt-2 ml-1">
                <h3 class="text-center">Paramètres pour la dépense de PAs</h3>
            </div>
            <div class="row mt-2 ml-1">
                Le contenu suivant ne doit être encodé qu'une seule fois (sauf pour les lanceurs de sorts
                qui devront peut-être changer encore le dernier champ).
                Au début de la campagne, il est possible de faire certaines actions qui diminuent ou augmentent
                le coût en PA de ce qui est encodé dans la fiche.
            </div>
            <div class="row mt-2 ml-1">
                D'abord passer directement certaines énergies ou règnes à 2 avec les 8 points d'énergie et de règne
                initiaux fait économiser 5 PA car passer au niveau 2 demande 10 PA au lieu de 5.
            </div>
            <div class="row form-row mt-2 md-form p-0 m-0">
                <div class="col-12">
                    <label for="energies-started-level-2">Nombre d'énergies montées à 2 à la création</label>
                    <input class="form-control adventure-points-setting" id="energies-started-level-2" type="number"
                           value="0" min="0" max="4">
                </div>
            </div>
            <div class="row mt-2 ml-1">
                Ensuite, le choix du métier et donc des talents qui sont montés à 0 ou à 1 influe sur la consommation
                en PA selon le niveau initial de ces talents de métiers.
            </div>
            <div class="row form-row mt-2 md-form p-0 m-0">
                <div class="col-4">
                    <label for="job-talents-x">Talents de métier en colonne X</label>
                    <input class="form-control adventure-points-setting" id="job-talents-x" type="number" value="0"
                           min="0">
                </div>
                <div class="col-4">
                    <label for="job-talents-4">Talents de métier en colonne -4</label>
                    <input class="form-control adventure-points-setting" id="job-talents-4" type="number" value="0"
                           min="0">
                </div>
                <div class="col-4">
                    <label for="job-talents-2">Talents de métier en colonne -2</label>
                    <input class="form-control adventure-points-setting" id="job-talents-2" type="number" value="0"
                           min="0">
                </div>
            </div>
            <div class="row mt-2 ml-1">
                Il y a également des talents conseillé pour chaque métier. Les prendre à la création du personnage
                réduit de 1 le coût de ceux-ci.
            </div>
            <div class="row form-row mt-2 md-form p-0 m-0">
                <div class="col-12">
                    <label for="advised-talents">Nombre de talents conseillés à la création</label>
                    <input class="form-control adventure-points-setting" id="advised-talents" type="number" value="0"
                           min="0">
                </div>
            </div>

            <div class="row mt-2 ml-1"><h4>Mages uniquement</h4></div>
            <div class="row mt-2 ml-1">
                En début de campagne et uniquement au début, les mages peuvent décider de dépenser des PA pour augmenter
                le niveau initial des sorts qu'ils ont. Normalement celui-ci est d'office à -4 et s'entraine
                par la pratique mais ils peuvent décider au début de monter cette valeur directement à -2 ou à 0
                pour le même prix qu'un talent. Le sort étant considéré comme un talent X, pour le passer à -2,
                cela coûte 3 PA et pour le passer à 0, cela coûte 5 PA.
            </div>
            <div class="row form-row mt-2 md-form p-0 m-0">
                <div class="col-sm-6">
                    <label for="spells-started-level-2">Nombre de sorts montés à -2 à la création</label>
                    <input class="form-control adventure-points-setting" id="spells-started-level-2" type="number"
                           value="0" min="0">
                </div>
                <div class="col-sm-6">
                    <label for="spells-started-level-0">Nombre de sorts montés à 0 à la création</label>
                    <input class="form-control adventure-points-setting" id="spells-started-level-0" type="number"
                           value="0" min="0">
                </div>
            </div>

            <div class="row mt-2 ml-1"><h4>Lanceurs de sorts uniquement</h4></div>
            <div class="row mt-2 ml-1">
                Lorsqu'un lanceur de sort (mage, prêtre,...) apprend le même sort pour différents règnes, il dépense
                1 PA de moins pour l'apprendre. C'est la seule case qui doit être mise à jour
                après le début de la campagne.
            </div>
            <div class="row form-row mt-2 md-form p-0 m-0">
                <div class="col-12">
                    <label for="same-spells-different-realms">Nombre de sorts bénéficiant de la réduction de 1PA</label>
                    <input class="form-control adventure-points-setting" id="same-spells-different-realms"
                           type="number" value="0" min="0">
                </div>
            </div>
        </div>
    </div>

    <div class="md-form row form-row mt-4">
        <div class="col-6 mt-3">
            <button id="save-page" type="submit" class="btn btn-primary form-control rounded">
                Sauvegarder
            </button>
        </div>
        <div class="input-group col-6">
            <div class="input-group-prepend pt-2 mt-1 pb-5">
                <span class="input-group-text" id="import-page-desc">Importer</span>
            </div>
            <div class=" custom-file">
                <input type="file" class="custom-file-input" id="import-page" accept="text/html"
                       aria-describedby="import-page-desc">
                <label class="custom-file-label" for="import-page">Choose file</label>
            </div>
        </div>
    </div>
</div>

<!-- Modals -->

<!-- Increase Breath -->
<div class="container">
    <div class="modal fade bd-modal-lg" id="breath-max-update" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-body align-middle">
                    <div class="row">
                        <button id="increment-breath" class="btn btn-success col-6 mx-0 px-0">
                            Augmenter de 1 le maximum des PS
                        </button>
                        <button id="decrement-breath" class="btn btn-danger col-6 mx-0 px-0">
                            Diminuer de 1 le maximum des PS
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Increase Psychic Balance -->
<div class="container">
    <div class="modal fade bd-modal-lg" id="psychic-max-update" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-body align-middle">
                    <div class="row">
                        <button id="increment-psychic" class="btn btn-success col-6 mx-0 px-0">
                            Augmenter de 1 le maximum des EP
                        </button>
                        <button id="decrement-psychic" class="btn btn-danger col-6 mx-0 px-0">
                            Diminuer de 1 le maximum des EP
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Javascript -->

<script>
    const components = ["body", "instincts", "heart", "mind"]
    const means = ["perception", "action", "desire", "resistance"]

    /* Update field value attributes as the user writes so that it will be saved in the HTML */

    function update_input(event) {
        event.target.setAttribute("value", event.target.value)
    }

    $("input").on("change", update_input)

    function update_slider(event) {
        event.target.setAttribute("data-slider-value", event.target.value)
    }

    $("input.input-slider").on("change", update_slider)

    function update_radio(event) {
        $("input[name='" + event.target.name + "']").removeAttr("checked")
        event.target.setAttribute("checked", "")
    }

    $("input[type=\"radio\"]").on("click", update_radio)

    /* Remaining adventure point computation */

    const start_components = 18
    const component_ap_cost = 20
    const start_means = 10
    const means_ap_cost = 10
    const start_breath = 4
    const breath_ap_cost = 30
    const start_psychic_balance = 4
    const psychic_balance_ap_cost = 30

    const start_energies = 8
    const energy_cost_by_level = [0, 5, 15, 35]

    // XXX Inaccuracy for talent that are not raised directly from X to 0 because it takes 6 PA instead of 5 PA
    // if this is not done directly (but that would be complicated to manage)
    const talent_values = ["x", "-4", "-2", "0", "1", "2", "3"]
    const talent_increment_cost = {
        x: {x: 0, "-4": 2, "-2": 3, "0": 5, "1": 10, "2": 30, "3": 70},
        "-4": {x: 0, "-4": 0, "-2": 1, "0": 4, "1": 9, "2": 29, "3": 69},
        "-2": {x: 0, "-4": 0, "-2": 0, "0": 3, "1": 8, "2": 28, "3": 68},
        "0": {x: 0, "-4": 0, "-2": 0, "0": 0, "1": 5, "2": 25, "3": 65}
    }
    const mage_spell_ap_cost = talent_increment_cost["x"]["-4"]
    const ki_divine_spell_ap_cost = talent_increment_cost["x"]["0"]

    function talent_level(talent, target_list) {
        const list = (target_list) ? target_list : $(talent).parents(".talent-list")[0]
        return list.id.replace("talents_", "")
    }

    function talent_base_level(talent) {
        let old_value = "x"
        if (talent.id.includes("talent_-4"))
            old_value = "-4"
        else if (talent.id.includes("talent_-2"))
            old_value = "-2"
        else if (talent.id.includes("talent_0"))
            old_value = "0"
        return old_value
    }

    function compute_remaining_ap() {
        let consumed_points = 0

        // Components
        let sum_points = 0
        $(".component").each((i, elem) => {
            sum_points += parseInt(elem.value)
        })
        if (sum_points > start_components)
            consumed_points += (sum_points - start_components) * component_ap_cost

        // Means
        sum_points = 0
        $(".means").each((i, elem) => {
            sum_points += parseInt(elem.value)
        })
        if (sum_points > start_means)
            consumed_points += (sum_points - start_means) * means_ap_cost

        // Breath
        const breath = $("#breath")
        let max_breath = parseInt(breath.attr("data-slider-max"))
        if ($("#heart").hasClass("bonus-applied")) { // +1 due to heart value
            max_breath -= 1
        }
        consumed_points += (max_breath - start_breath) * breath_ap_cost

        // Psychic balance
        const psychic = $("#psychic")
        let max_psychic = parseInt(psychic.attr("data-slider-max"))
        if ($("#mind").hasClass("bonus-applied")) { // +1 due to mind value
            max_psychic -= 1
        }
        consumed_points += (max_psychic - start_psychic_balance) * psychic_balance_ap_cost

        // Realm & energies
        let energy_point_increased = 0
        const energies_repartition_level = [0, 0, 0, 0] // Level ranges from 0 to 3
        $(".realm, .energy").each((i, elem) => {
            let value = parseInt(elem.value)
            if (isNaN(value) || elem.id === "void")
                value = 0
            energy_point_increased += value
            energies_repartition_level[value] += 1
        })
        if (energy_point_increased > start_energies) { // To check that at least the 8 starting points were spent
            for (let level = 0; level < energies_repartition_level.length; level++) {
                consumed_points += energy_cost_by_level[level] * energies_repartition_level[level]
            }
            const start_energies_2 = parseInt($("#energies-started-level-2").val())
            const start_energies_1 = start_energies - start_energies_2 * 2
            consumed_points -= (energy_cost_by_level[2] * start_energies_2 + energy_cost_by_level[1] * start_energies_1)
        }

        // Talents
        let job_talent_found = false
        $(".talent").each((i, elem) => {
            // Current talent level
            const current_value = talent_level(elem)
            if (current_value === "1")
                job_talent_found = true

            // Initial talent level
            const old_value = talent_base_level(elem)
            consumed_points += talent_increment_cost[old_value][current_value]
        })
        // Initial talents of the job were raised to 0
        consumed_points -= talent_increment_cost["x"]["0"] * parseInt($("#job-talents-x").val())
        consumed_points -= talent_increment_cost["-4"]["0"] * parseInt($("#job-talents-4").val())
        consumed_points -= talent_increment_cost["-2"]["0"] * parseInt($("#job-talents-2").val())
        // Main talent of the job was raised to 1
        if (job_talent_found)
            consumed_points -= talent_increment_cost["0"]["1"]
        // Advised talents for the job reduces their cost by 1 PA
        consumed_points -= parseInt($("#advised-talents").val())

        // Spells
        $(".spell-list").each((i, elem) => {
            const value = elem.value.trim()
            if (value === "Divin" || value === "Ki")
                consumed_points += ki_divine_spell_ap_cost // Priest and monk have level 0 spell directly
            else if (value.length > 0)
                consumed_points += mage_spell_ap_cost // Mages have -4 level spells at start
        })
        // Spell increased above level 0 at start of the campaign
        const diff_level_2 = talent_increment_cost["x"]["-2"] - talent_increment_cost["x"]["-4"]
        consumed_points += diff_level_2 * parseInt($("#spells-started-level-2").val())
        const diff_level_0 = talent_increment_cost["x"]["0"] - talent_increment_cost["x"]["-4"]
        consumed_points += diff_level_0 * parseInt($("#spells-started-level-0").val())
        // Spells of same realm for the job reduces their cost by 1 PA
        consumed_points -= parseInt($("#same-spells-different-realms").val())

        // Show difference with total points
        const total_points = parseInt($("#adventure-points").val()) + parseInt($("#adventure-points-discount").val())
        $("#remaining-adventure-points").text(total_points - consumed_points)
    }

    $(".energy").on("change", compute_remaining_ap)
    // Change adventure points settings
    $(".adventure-points-setting").on("change", compute_remaining_ap)

    /* Update sum of means and component when one of them changes */

    function update_sum(event) {
        const id = event.target.id
        const value = event.target.value
        const others = components.includes(id) ? means : components

        for (let i = 0; i < others.length; i++) {
            const sum_id = components.includes(id) ? "#" + id + "-" + others[i] : "#" + others[i] + "-" + id
            $(sum_id)[0].innerText = parseInt(value) + parseInt($("#" + others[i])[0].value)
        }

        // Update all of the spell values
        $(".spell-value").each((i, elem) => {
            update_spell_value($(elem))
        })

        // Update adventure points
        compute_remaining_ap()
    }

    $(".means").on("change", update_sum)
    $(".component").on("change", update_sum)
    $(document).ready(function () {
        // Update the sum of components and means on load
        for (let i = 0; i < means.length; i++) {
            update_sum({target: $("#" + means[i])[0]})
        }
    })

    /* Tooltip initializations */
    $(function () {
        $('[data-toggle="tooltip"]:visible').tooltip()
    })

    /* HP sliders */

    function set_slider_min(slider, new_min) {
        // Update current value by the difference between old min and new min
        const old_min = parseInt(slider.slider("getAttribute", "min"))
        const old_value = parseInt(slider[0].value)
        const new_value = old_value + new_min - old_min
        slider[0].value = new_value
        slider.slider("setAttribute", "value", new_value)

        // Update the minimum
        slider.slider("setAttribute", "min", new_min)
        slider[0].setAttribute("data-slider-min", new_min.toString())
        slider.slider("refresh")
    }

    function hp_update(event) {
        const value = parseInt(event.target.value)
        const slider = $("#" + event.target.getAttribute("data-slider-id"))
        const handle = slider.find(".slider-handle.custom:visible")
        const selection = slider.find(".slider-selection")
        // Update color
        if (value === 0) {
            handle.removeClass('full').removeClass('unease').addClass('dead')
            selection.removeClass('full').removeClass('unease')
        } else if (value <= 1) {
            handle.removeClass('full').addClass('unease').removeClass('dead')
            selection.removeClass('full').addClass('unease')
        } else {
            handle.addClass('full').removeClass('unease').removeClass('dead')
            selection.addClass('full').removeClass('unease')
        }
        // Recompute minimum unease
        let unease_sum = 0
        const hp_sliders = $(".hp.input-slider")
        for (let i = 0; i < hp_sliders.length; i++)
            if (hp_sliders[i].value <= 1)
                unease_sum += 1
        set_slider_min($("#unease"), unease_sum)
    }

    function activate_slider(input) {
        // Remove pre-existing sliders (this happens after a save of the html page)
        const elem = "#" + input.getAttribute("data-slider-id")
        const input_id = input.id
        $(elem).remove()
        input.setAttribute("style", {})
        const opts = {
            formatter: value => { // Show remaining HP over maximum HP
                const input = $("#" + input_id)[0]
                const max = parseInt(input.getAttribute("data-slider-max"))
                if (input.id === "breath" && value === 0)
                    return "K.O."
                if (input.id === "psychic" && value === 0)
                    return "Fou"
                if ($(input).hasClass("spell-difficulty-input")) {
                    const difficulty_elem = $("#" + input.id.slice(0, -6))
                    let difficulty // Use the count of the spell casted to compute difficulty
                    if (value < 4)
                        difficulty = -4
                    else if (value <= 6)
                        difficulty = -3
                    else if (value <= 8)
                        difficulty = -2
                    else if (value === 9)
                        difficulty = -1
                    else if (value <= 19)
                        difficulty = 0
                    else if (value <= 29)
                        difficulty = 1
                    else
                        difficulty = 2
                    difficulty_elem.text(difficulty)
                }
                return value + "/" + max
            }
        }
        if (input.id === "unease") {
            opts["formatter"] = value => {
                const max = parseInt(input.getAttribute("data-slider-max"))
                const initial_malus = -1 + max - 4
                let text = ""
                if (value === 0 || initial_malus - value === 0)
                    text = "\u2205"
                else if (value === max)
                    text = "coma"
                else
                    text = "malus de " + (initial_malus - value)
                $("#unease-text").text(text)
                return text
            }
        }

        const orientation = input.getAttribute("data-slider-reversed")
        if (orientation != null && orientation === "true") {
            // We need to manually change the orientation of the active selection bar because vertically,
            // it would not make sense if the green bar is from top to bottom
            opts["selection"] = "after"
        }
        const slider = $(input).slider(opts)
        if (slider.hasClass("hp")) {
            slider.on("change", hp_update)
            $("#" + input.getAttribute("data-slider-id")).addClass("hp-slider")
        }
    }

    $('.input-slider').each((i, input) => {
        activate_slider(input)
    })

    $(".hp").each((i, input) => {
        hp_update({target: input})
    })

    /* Update armor penalty */
    $(".armor").on("change", event => {
        const armors = $.map($(".armor"), element => parseInt(element.value))
        let armor_sum = 0
        for (let i = 0; i < armors.length; i++) {
            armor_sum += armors[i] << 0
        }

        let penalty = 0
        if (armor_sum >= 12 && armor_sum <= 23) {
            penalty = 1
        } else if (armor_sum >= 24 && armor_sum <= 30) {
            penalty = 2
        } else if (armor_sum >= 31) {
            penalty = 3
        }
        $("#armor-penalty").text(penalty)
    })

    /* Update HP and unease max values depending on the resistance */

    function set_slider_max(slider, value) {
        slider.slider("setAttribute", "max", value)
        slider[0].setAttribute("data-slider-max", value.toString())
        slider.slider("refresh", {useCurrentValue: true})
    }

    $("#resistance").on("change", event => {
        const value = parseInt(event.target.value)
        const trunk = $("#hp-trunk")
        const right_leg = $("#hp-right-leg")
        const left_leg = $("#hp-left-leg")
        const unease = $("#unease")
        if (value <= 1) { // Weak constitution
            set_slider_max(trunk, 3)
            set_slider_max(right_leg, 3)
            set_slider_max(left_leg, 3)
            set_slider_max(unease, 4)
        } else if (value === 2) { // Normal constitution
            set_slider_max(trunk, 4)
            set_slider_max(right_leg, 3)
            set_slider_max(left_leg, 3)
            set_slider_max(unease, 5)
        } else { // Strong constitution
            set_slider_max(trunk, 5)
            set_slider_max(right_leg, 4)
            set_slider_max(left_leg, 4)
            set_slider_max(unease, 6)
        }
    })

    /* Update PS and EP max values depending on respectively heart and mind values */

    function update_body_energy(component, body_energy) {
        const value = parseInt(component.value)
        const current_max = parseInt(body_energy[0].getAttribute("data-slider-max"))
        if (value >= 5 && !$(component).hasClass("bonus-applied")) { // Higher value to update
            set_slider_max(body_energy, current_max + 1)
            $(component).addClass("bonus-applied")
        } else if (value < 5 && $(component).hasClass("bonus-applied")) { // Lower value to update
            set_slider_max(body_energy, current_max - 1)
            $(component).removeClass("bonus-applied")
        }
    }

    $("#mind").on("change", event => {
        update_body_energy(event.target, $("#psychic"))
    })
    $("#heart").on("change", event => {
        update_body_energy(event.target, $("#breath"))
    })

    /* Update PS and EP if users click on the button */
    $("#increment-breath").on("click", _ => {
        const breath = $("#breath")
        const current_max = parseInt(breath[0].getAttribute("data-slider-max"))
        if (current_max < 8)
            set_slider_max(breath, current_max + 1)

        // Adventure points
        compute_remaining_ap()
    })
    $("#decrement-breath").on("click", _ => {
        const breath = $("#breath")
        const current_max = parseInt(breath[0].getAttribute("data-slider-max"))
        if (current_max > 1)
            set_slider_max(breath, current_max - 1)

        // Adventure points
        compute_remaining_ap()
    })
    $("#increment-psychic").on("click", _ => {
        const psychic = $("#psychic")
        const current_max = parseInt(psychic[0].getAttribute("data-slider-max"))
        if (current_max < 8)
            set_slider_max(psychic, current_max + 1)

        // Adventure points
        compute_remaining_ap()
    })
    $("#decrement-psychic").on("click", _ => {
        const psychic = $("#psychic")
        const current_max = parseInt(psychic[0].getAttribute("data-slider-max"))
        if (current_max > 1)
            set_slider_max(psychic, current_max - 1)

        // Adventure points
        compute_remaining_ap()
    })

    /* Talent lists */

    function add_talent(list) {
        const initial_level = list[0].id.replace("talents_", "")

        // Find new id
        let new_id_idx = 0
        while ($("#talent_" + initial_level + new_id_idx).length > 0)
            new_id_idx++

        // Clone and set ids
        const new_talent = $("#talent_" + initial_level).clone(true, true)
        new_talent[0].id = "talent_" + initial_level + new_id_idx
        const input = $(new_talent).find("input")
        input[0].id = initial_level + new_id_idx + "-name"
        input[0].value = ""
        input[0].setAttribute("value", "")
        const label = $(new_talent).find("label")[0]
        label.for = initial_level + new_id_idx + "-name"
        $(new_talent).removeAttr("hidden")
        $(new_talent).tooltip()

        list.children().last().before(new_talent)
        return new_talent
    }

    $("#add-talent-x").on("click", _ => {
        add_talent($("#talents_x"))
    })
    $("#add-talent--4").on("click", _ => {
        add_talent($("#talents_-4"))
    })
    $("#add-talent--2").on("click", _ => {
        add_talent($("#talents_-2"))
    })
    $("#add-talent-0").on("click", _ => {
        add_talent($("#talents_0"))
    })

    default_talents = {
        x: ["Agriculture", "Alchimie", "Art de la guerre", "Art magique", "Botanique", "Histoire d'Heldor",
            "Langue étrangère éloignée", "Lire & Écrire", "Lire sur les lèvres", "Mathématiques", "Navigation",
            "Menuiserie/Ébénisterie", "Minéralogie/Joaillerie", "Poisons", "Serrurerie", "Zoologie"],
        "-4": ["Armes normales", "Arts martiaux/Lutte", "Camouflage", "Commerce/Marchandage", "Coutumes étrangères",
            "Équitation", "Géographie d'Heldor", "Langue étrangère proche", "Jonglage/Acrobaties", "Maçonnerie",
            "Médecine", "Musique", "Natation", "Piégeage", "Vol à la tire"],
        "-2": ["Armes légères", "Bricolage", "Cartographie", "Comédie", "Danse", "Déguisement", "Dessin", "Dressage",
            "Escalade", "Orientation", "Poésie/Contes & Légendes", "Pistage/Chasse/Pêche", "Premiers soins",
            "Recherches en bibliothèque", "Religion", "Sculpture"],
        "0": ["Athlétisme", "Bagarre", "Chant", "Cuisine", "Discrétion", "Entregent", "Langue maternelle", "Séduction",
            "Observation"]
    }

    function add_missing_talents(talents) {
        // Insert missing default talent if they do not exist
        for (const [level, level_talents] of Object.entries(talents)) {
            for (const talent of level_talents) {
                if ($("input[value=\"" + talent + "\"]").length === 0) {
                    const elem = add_talent($("#talents_" + level)).find("input")
                    elem.val(talent)
                    elem.trigger("change")
                }
            }
        }
    }

    add_missing_talents(default_talents)

    function update_talent(event) {
        const target_list = event.to
        const current_level = talent_level(event.item, target_list)
        const old_level = talent_base_level(event.item)

        // Update tooltip and color for increased talents
        if (current_level !== old_level) {
            event.item.setAttribute("data-original-title",
                "Talent " + old_level.toUpperCase() + " à la base <br />" + "Coût: "
                + talent_increment_cost[old_level][current_level] + " PA")
            $(event.item).addClass("increased-talent").tooltip({disabled: false})
            $(event.item).find(".talent-origin").text("< " + old_level.toUpperCase())
        } else {
            event.item.setAttribute("data-original-title", "")
            $(event.item).removeClass("increased-talent").tooltip({disabled: true})
            $(event.item).find(".talent-origin").text("")
        }

        // Update Adventure points
        compute_remaining_ap()
    }

    $('.talent-list').sortable({
        handle: '.fa-arrows-alt',
        group: 'talent-lists',
        dragoverBubble: true,
        onEnd: update_talent
    })

    /* Update the spell difficulty */

    function update_spell_value(value_div) {
        let sum = 0
        const value_id = value_div[0].id
        let base_array = value_id.split("-")
        base_array.pop()
        const base_id = base_array.join("-")

        // Recover component, means and realm
        const elements = ["component", "means", "realm"]
        for (let i = 0; i < elements.length; i++) {
            const elem_name = base_id + "-" + elements[i]
            const checked_elem = $("input[name=" + elem_name + "]:checked")
            if (checked_elem.length === 0)
                return // Not a full formula
            base_array = checked_elem[0].id.split("-")
            sum += parseInt($("#" + base_array[base_array.length - 1]).val())
        }

        // Recover difficulty
        sum += parseInt($("#" + base_id + "-difficulty").text())

        // Update
        value_div.text(sum)
    }

    function list_changed(event) {
        // Trigger update of the spell difficulty
        const target_id = event.target.id
        const value_array = target_id.split("-")
        value_array.pop()
        const difficulty_id = value_array.join("-") + "-difficulty-input"

        // Fix the level to 0 if divine or ki energies
        const slider = $("#" + difficulty_id)
        if (event.target.value === "Divin" || event.target.value === "Ki") {
            slider.val(10).slider("setValue", 10).slider("refresh", {useCurrentValue: true}).slider("disable")
            $(slider.slider("getElement")).hide()
        } else {
            slider.slider("enable").slider("refresh", {useCurrentValue: true})
            $(slider.slider("getElement")).show()
        }

        // Update spell value
        casting_count_changed({target: slider[0]})

        // Update adventure points
        compute_remaining_ap()
    }

    function formula_changed(event) {
        // Trigger update of the spell difficulty
        const target_id = event.target.id
        const value_array = target_id.split("-")
        value_array.pop()
        const value_id = value_array.join("-") + "-value"
        update_spell_value($("#" + value_id))
    }

    function casting_count_changed(event) {
        // Trigger update of the spell difficulty
        const target_id = event.target.id
        const value_array = target_id.split("-")
        value_array.pop()
        value_array.pop()
        const value_id = value_array.join("-") + "-value"
        update_spell_value($("#" + value_id))
    }

    $(".spell-list").on("change", list_changed)
    $(".spell-formula-elem").on("click", formula_changed)
    $(".spell-difficulty-input").on("change", casting_count_changed)
    $(".realm").on("change", _ => {
        // Update all of the spell values
        $(".spell-value").each((i, elem) => {
            update_spell_value($(elem))
        })

        // Update Adventure Points
        compute_remaining_ap()
    })

    /* Add new spell rows */

    function add_row(table, new_elem) {
        // Increment the spell id
        const last_tr_id = table.children().last()[0].id
        const new_id = parseInt(last_tr_id.split("-").pop()) + 1

        new_elem.find("*[id*=-0-]").each((i, elem) => {
            elem.id = elem.id.replace("-0-", "-" + new_id + "-")
        })
        new_elem.find("*[name*=-0-]").each((i, elem) => {
            elem.setAttribute("name", elem.getAttribute("name").replace("-0-", "-" + new_id + "-"))
        })
        new_elem.find("*[for*=-0-]").each((i, elem) => {
            elem.setAttribute("for", elem.getAttribute("for").replace("-0-", "-" + new_id + "-"))
        })
        new_elem.find("*[data-slider-id*=-0-]").each((i, elem) => {
            elem.setAttribute("data-slider-id", elem.getAttribute("data-slider-id").replace("-0-", "-" + new_id + "-"))
        })
        new_elem[0].id = new_elem[0].id.replace("-0", "-" + new_id)
        table.append(new_elem)

        return new_id
    }

    $("#add-spell").on("click", _ => {
        const table = $("#spell-table")

        // We have to reset listeners because of the slider
        const new_spell = $("#spell-0").clone(true, false)
        new_spell.find(".spell-list").on("change", list_changed)
        new_spell.find(".spell-formula-elem").on("click", formula_changed)
        new_spell.find(".spell-difficulty-input").on("change", casting_count_changed)

        // Find all elements that have id containing old value
        new_spell.find("input").each((i, elem) => {
            elem.value = ""
            $(elem).on("change", update_input)
        })
        new_spell.find("input.input-slider").on("change", update_slider)
        new_spell.find("input[type=\"radio\"]").on("click", update_radio)

        const new_id = add_row(table, new_spell)
        activate_slider(new_spell.find("#spell-" + new_id + "-difficulty-input")[0])
    })

    /* Add new equipment rows */
    $("#add-focus").on("click", _ => {
        add_row($("#focus-table"), $("#focus-0").clone(true, true))
    })
    $("#add-magical-equipment").on("click", _ => {
        add_row($("#magical-equipment-table"), $("#magical-equipment-0").clone(true, true))
    })
    $("#add-equipment").on("click", _ => {
        add_row($("#equipment-table"), $("#equipment-0").clone(true, true))
    })

    /* Save Character page */
    $("#save-page").on("click", function (_) {
        const userInput = "<!DOCTYPE html><html lang=\"fr\">" + $("html").html() + "</html>"
        const blob = new Blob([userInput], {type: "text/html;charset=utf-8"})

        // Use the name of the character as the name of the file
        let character_name = $("input#character-name")[0].value
        if (character_name === null || character_name.length === 0)
            character_name = "Anonyme"
        saveAs(blob, character_name + ".html")
    })

    /* Import Character page data */
    $("#import-page").on("change", function (event) {
        if (event.target.files.length === 0)
            return

        const reader = new FileReader();
        reader.onload = e => {
            // Executed at the completion of the read
            const old_html = $(e.target.result)

            // Retrieve and copy all of the input values of the old_html
            const table_row_input_id = /(.+)-(\d+)-.+/;
            const talent_input_id = /(x|(?:-4)|(?:-2)|0)(\d+)-name/;
            old_html.find("input").each((i, old_input) => {
                let new_input = $("#" + old_input.id)

                const talent_matching = old_input.id.match(talent_input_id);
                if (new_input.length === 0) {
                    let matching = old_input.id.match(table_row_input_id)
                    if (matching) {
                        // Add rows to the tables until it finds the appropriate field
                        const button = $("#add-" + matching[1])
                        while (new_input.length === 0) {
                            button.trigger("click")
                            new_input = $("#" + old_input.id)
                        }
                    }

                    if (talent_matching) {
                        // Add element
                        const button = $("#add-talent-" + talent_matching[1])
                        while (new_input.length === 0) {
                            button.trigger("click")
                            new_input = $("#" + old_input.id)
                        }
                    }
                }

                // Check the list of the talent
                if (talent_matching) {
                    const target_talent_list = old_html.find(old_input).parents(".talent-list")
                    const current_talent_list = $(new_input).parents(".talent-list")
                    if (target_talent_list[0].id !== current_talent_list[0].id) {
                        // Move to new table if needed
                        const row = $(new_input).parents(".talent")
                        $("#" + target_talent_list[0].id).children().first().after(row)
                    }
                }

                // Refresh modified sliders
                if (new_input.hasClass("input-slider")) {
                    new_input.slider("setValue", old_input.value)
                    new_input.slider("refresh", {useCurrentValue: true})
                }

                // We change the value and trigger the change in case of a listener
                new_input.val(old_input.value)
                new_input.trigger("change")
            })

            // Check correct radio buttons
            old_html.find("input:checked").each((i, old_input) => {
                const new_input = $("#" + old_input.id)
                new_input.click().trigger("click")
            })
        }

        // Asynchronous read
        reader.readAsText(event.target.files[0])
    })
</script>

<!-- Begin SVG images -->
<div hidden>
    <!-- images/perception.svg -->
    <svg id="svg-perception" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         viewBox="-10 0 996 1000">
        <path fill="currentColor"
              d="M855 772l-1 1q-106 -92 -251 -165q-102 -52 -273 -115q-69 -26 -242 -72q53 -15 128 -47q62 -28 125 -55q257 -105 497 -291v70l-34 27q94 106 94 268q0 111 -46 205q-11 24 -39 71q14 10 42 34v69zM846 264q0 -23 -8 -38t-19 -15t-18.5 16t-7.5 38t7.5 38t18.5 16
t18.5 -16t7.5 -38zM794 656v-1q-28 -28 -57 -90q-40 -86 -40 -184q0 -153 94 -247q-190 130 -462 229q-53 18 -146 51q391 101 608 242h3z"/>
    </svg>
    <!-- images/action.svg -->
    <svg id="svg-action" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         viewBox="-10 0 1065 1000">
        <path fill="currentColor"
              d="M969 400l-350 348v-144h-276v-408h276v-144zM116 604h-31v-407l31 -1v408zM187 604h-43v-407l43 -1v408zM295 604h-72v-408h72v408z"/>
    </svg>
    <!-- images/desire.svg -->
    <svg id="svg-desire" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         viewBox="-10 0 883 1000">
        <path fill="currentColor"
              d="M806 386q7 35 7 68q0 84 -52 181q-55 103 -126 152q-77 55 -190 57q-72 1 -120 -9q-58 -13 -114 -50q-52 -35 -74 -58q-31 -32 -51 -83q-27 -69 -27 -114q0 -50 42 -109q19 -21 39 -44t20 -45q0 -8 -3 -17q-2 -20 -24.5 -55.5t-23.5 -36.5q26 8 77 37q41 33 50 44
q19 26 17 67q-1 26 -19 60q-15 30 -12 51q7 27 25 38q13 8 27 8q21 0 44 -18q16 -12 27 -59q5 -20 5 -38q0 -47 -46 -119q-54 -86 -67 -132q-3 -12 -3 -23q0 -28 26 -70q74 -117 208 -170l12 2q2 1 -33 28q-41 30 -53 43q-33 45 -33 97t35 91q18 26 106 87q79 54 104 113
q11 23 21 46q4 13 5 54q53 -83 53 -116q0 -31 -53 -129q-12 -17 -20 -33q-21 -39 -22 -71q0 -22 31 -56q28 -31 36 -30q2 0 2 2l-13 30t-14 53q0 30 26 52.5t52 44.5q88 96 95 179h1z"/>
    </svg>
    <!-- images/resistance.svg -->
    <svg id="svg-resistance" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         viewBox="-10 0 1009 1000">
        <path fill="currentColor"
              d="M505 5q104 65 297 65l9 4q8 -4 12 -4t4 4l21 -4h17q8 1 8 8v233q0 285 -289 483l-75 34q-174 -60 -294 -245q-75 -146 -75 -241v-264q1 -8 8 -8h59q201 0 298 -65z"/>
    </svg>
    <!-- images/body.svg -->
    <svg id="svg-body" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         viewBox="-10 0 826 1000">
        <path fill="currentColor"
              d="M733 489q0 133 -95 228.5t-229 95.5t-230 -94.5t-96 -229.5t95.5 -229t230.5 -94q134 0 229 94.5t95 228.5zM668 489q0 -107 -76 -182.5t-183 -75.5q-108 0 -184.5 75t-76.5 183t77 183.5t184 75.5t183 -76t76 -183z"/>
    </svg>
    <!-- images/instincts.svg -->
    <svg id="svg-instincts" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         viewBox="-10 0 1011 1000">
        <path fill="currentColor"
              d="M918 584l-1 1q-42 62 -106.5 95t-140.5 28l-49 -9l-275 -76q-16 -5 -33 -5q-44 0 -89.5 29t-71.5 68l-67 -41q89 -127 231 -127q34 0 67 9l278 74q121 11 197 -85q21 13 60 39zM917 355l-1 1q-42 62 -107 95t-140 27l-49 -9l-275 -76q-16 -5 -33 -5q-44 0 -91 31
q-44 27 -70 67l-67 -41q41 -59 102 -93.5t130 -34.5q33 0 66 9l278 75q121 11 197 -85q21 13 60 39zM916 126h-1q-42 62 -106.5 95t-140.5 28l-49 -9l-275 -76q-16 -5 -33 -5q-44 0 -91 31q-44 27 -70 67l-67 -41q41 -59 102 -93.5t130 -34.5q33 0 66 9l278 75
q121 11 197 -85q21 13 60 39z"/>
    </svg>
    <!-- images/heart.svg -->
    <svg id="svg-heart" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         viewBox="-10 0 1049 1000">
        <path fill="currentColor"
              d="M950 372q-10 17 -99 95q-80 69 -111 92q-64 46 -69 51q-31 27 -89 83q-17 17 -64 70q-23 -26 -62 -71q-9 -9 -89 -84l-68 -49q-33 -23 -113 -93q-89 -78 -98 -97q-24 -49 -24 -109q0 -89 50 -149q61 -74 170 -74q28 0 56 6q62 13 113 68q46 51 65 116q18 -65 65 -116
q51 -54 113 -67q28 -6 57 -6q108 0 171 74q51 61 51 151q0 60 -25 108v1z"/>
    </svg>
    <!-- images/mind.svg -->
    <svg id="svg-mind" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         viewBox="-10 0 936 1000">
        <path fill="currentColor"
              d="M737 119l-171 170l-17 -17l171 -170zM889 389l-285 21v-69l285 21v27zM497 235h-69l21 -319h28zM532 376q0 29 -20.5 49t-49.5 20t-49 -20.5t-20 -49.5t20.5 -49t49.5 -20q28 0 48.5 20.5t20.5 49.5zM376 272l-17 17l-171 -170l17 -17zM735 634l-17 17l-170 -171l17 -17z
M322 410l-285 -21v-27l285 -21v69zM497 517l-20 319h-28l-21 -319h69zM376 479l-171 171l-17 -17l171 -171z"/>
    </svg>
    <!-- images/mineral.svg -->
    <svg id="svg-mineral" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         viewBox="-10 0 887 1000">
        <path fill="currentColor"
              d="M821 551l-215 251h-351q-201 -225 -199 -228l355 -589q8 6 410 566zM782 549l-155 108l-26 109zM767 539l-327 -458l187 551zM593 635l-181 -559q-10 38 -161 559h342zM604 657h-353l31 111h298zM387 82l-286 481l127 65zM262 766l-33 -113l-128 -68z"/>
    </svg>
    <!-- images/vegetal.svg -->
    <svg id="svg-vegetal" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         viewBox="-10 0 922 1000">
        <path fill="currentColor"
              d="M831 157q25 38 25 87q0 59 -34 112q-20 58 -57 71q-25 9 -59 9q-14 0 -42.5 -2t-43.5 -2q-3 10 -16 29.5t-16 31.5q-6 4 -5 12q2 7 3 14q19 61 51 187q13 29 18 79q5 5 7 24q-7 14 -34 7q-44 -6 -132 -16q-167 -15 -272 -14q-5 -3 -5 -7q0 -3 3.5 -9t3.5 -8
q11 -24 39 -70q2 -14 32 -61q6 -10 14 -33q16 -28 51 -84q-14 -52 -29 -76q-9 4 -30 11q-12 4 -26 4q-20 0 -48 -11l-46 -18q-66 -24 -79 -31q-42 -25 -44 -69q-4 -15 -4 -33q0 -10 4 -45q2 -28 0 -46q23 -40 106 -70q11 -1 44 -8q27 -5 45 -5q11 0 22 1.5t30 6.5
q8 -12 14 -52q6 -34 25 -48q34 -36 107 -41q84 -6 170 86q6 15 8 54q10 0 30 -6t31 -6q5 0 10 1q48 0 71 5q39 10 57 39h1zM614 383h-5q-6 -2 -11 -2q-18 0 -30 24q-19 38 -21 40q-16 20 -41 12q-16 -7 -17.5 -25.5t-1.5 -35.5q-45 0 -49 -1q-49 -24 -106 -35q23 47 43 80
q0 2 11 26q21 35 21 46q-39 80 -126 236h25q58 4 114 5q119 1 185 10q1 -27 -7 -62q-8 -30 -16 -59q-14 -61 -33 -116q-2 -6 -2 -11q0 -7 6 -19.5t7 -17.5q19 -38 47 -78q3 -6 7 -17z"/>
    </svg>
    <!-- images/animal.svg -->
    <svg id="svg-animal" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         viewBox="-10 0 1010 1000">
        <path fill="currentColor"
              d="M940 384v-1q-1 1 -19 1q-38 -10 -76 -39q-3 26 -14 75q-6 34 -16 50q0 15 -8 36q-12 28 -14 33q-11 23 -41 60q0 1 -11 9q-19 27 -43 26q-27 -1 -45 -30q-7 -11 -23 -51q-7 -11 -16 -23.5t-21 -13.5q-15 -9 -43 6q-23 22 -40 84q-5 12 -10 39t-11 39q-1 6 -6 17
q-13 36 -42 64q-5 4 -16 11q-32 17 -57 11q-2 2 -5 2t-9 -4t-11 -4q-52 -33 -72 -105q-13 -43 -18 -134q-25 -8 -52 -17.5t-45 -25.5q-72 -49 -65 -159q3 -6 3 -13q0 -9 -12.5 -28t-12.5 -32q-9 -31 -9 -66q0 -84 47 -161q21 -25 36 -29l5 6q1 5 -4.5 9.5t-6.5 7.5
q-7 23 -7 50q0 44 17 83q3 6 17 25q43 -32 123 -43q89 0 140 58q19 -22 24 -30q12 -19 12 -37q15 -28 2 -65q-6 -16 -24 -42l6 -9l2 2h2q84 60 84 176q0 92 -52 145q0 80 -67 151l-1 -2q-39 34 -110 52q-3 74 15 131q6 32 24 50h1q29 20 39 18q50 -29 64 -103q4 -12 11 -34
t10 -34t26 -59q7 -13 24 -26q25 -18 28 -22q24 -16 54 -8q46 5 66 71q7 14 14 29t21 15q22 -14 39 -48q26 -54 27 -56q11 -31 30 -94q6 -19 4 -41q-18 14 -52 35t-37 20q-2 -1 52.5 -122t55.5 -120q44 94 116 231z"/>
    </svg>
    <!-- images/humanoid.svg -->
    <svg id="svg-humanoid" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         viewBox="-10 0 698 1000">
        <path fill="currentColor"
              d="M617 273h-238v168q91 16 140 110.5t49 249.5l-72 -1q0 -127 -37 -206q-41 -85 -115 -85q-75 0 -115 86q-37 78 -37 206l-72 -1q0 -155 49 -249t140 -110v-168h-237v-70h237l-1 -22q-32 -11 -52 -39t-20 -63q0 -45 31.5 -76.5t76.5 -31.5t76.5 31.5t31.5 76.5
q0 35 -20.5 63t-52.5 39v22h238v70z"/>
    </svg>
    <!-- images/mechanical.svg -->
    <svg id="svg-mechanical" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         viewBox="-10 0 800 1000">
        <path fill="currentColor"
              d="M749 188l-120 161l-90 -68q-123 148 -185 232q-96 131 -157 250q-8 17 -34 34t-46 17q-17 0 -33 -12l-19 -14q-25 -19 -25 -47q0 -15 8 -32q10 -30 22 -44q182 -192 367 -461l-194 -148l39 -53q14 -18 41 -6l48 24q28 13 53 13q40 0 84 -29l51 39q13 -6 24 -6q16 0 35 13
l19 12q28 22 28 41q0 8 -4 18zM692 196l-188 -141q-40 22 -76 22q-26 0 -50 -12t-47 -24q-14 -7 -22 -5l-10 14l321 241zM482 286q0 -29 -29 -29t-29 29t29 29t29 -29z"/>
    </svg>
    <!-- images/void.svg -->
    <svg id="svg-void" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         viewBox="-10 0 902 1000">
        <path fill="currentColor"
              d="M803 608q-34 104 -128 159q-85 50 -197 50q-89 0 -170 -33q-113 -45 -178 -151q-62 -100 -62 -223q0 -105 48 -198q57 -105 156 -163q92 -52 204 -52q146 0 278 91l-45 66q-112 -77 -233 -77q-90 0 -164 42q-79 45 -124 131q-40 74 -40 160q0 99 51 180q51 85 140 120
q75 31 145 31q116 0 191 -80q69 -73 69 -173q0 -65 -32 -119q-37 -57 -104 -89q-63 -30 -127 -30q-117 0 -156 87q-16 34 -16 74q0 66 38 117q38 53 92 57q77 5 118 -31q35 -30 35 -77q0 -36 -20 -59t-54 -23q-25 0 -42.5 8.5t-17.5 19.5q0 9 11 19q46 47 73 88l-67 44
l-21 -33q-3 -4 -45 -46q-30 -30 -30 -65q0 -10 2 -20q8 -45 47 -72q37 -24 85 -24q64 0 108 40q50 45 50 123q0 18 -2 35q-12 82 -89 124q-65 34 -147 29q-91 -7 -150 -87q-53 -73 -53 -168q0 -58 22 -106q62 -135 227 -135q131 0 232 86q113 94 113 235q0 58 -21 118z"/>
    </svg>
    <!-- images/power.svg -->
    <svg id="svg-power" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         viewBox="-10 0 911 1000">
        <path fill="currentColor"
              d="M701 126q-33 -37 -45 -49q-29 -27 -55 -35q3 -23 44 -23q32 0 45 11.5t14 43.5v41zM542 286q-1 7 -11 16t-26 9q-11 0 -33 -5q-7 -23 -20 -121q-13 -94 -13 -116q0 -48 26 -61q60 -5 49 -5q28 0 38 16v9q-11 -2 -19 -2q-34 0 -56.5 22.5t-21.5 59.5q2 44 76 108l21 18z
M602 566q-61 33 -96 31q-58 -3 -77 -30q-7 -9 -11 -22q-7 -18 -7 -61q0 -60 45 -109.5t104 -49.5q12 -7 24 -65q3 -13 7 -25q-8 -7 -29 -27q-25 -24 -51 -48q-29 -29 -29 -60t25 -43q8 -4 32 -4q27 0 75 30q35 21 70 68q69 92 69 175q0 12 -1 25q-12 142 -150 215zM433 360
q-18 13 -35 13q-14 0 -25 -7.5t-12 -13.5q0 -157 -57 -238q7 -35 65 -52h22q14 0 17 8q19 67 34 250q2 17 -9 40zM320 384q-29 3 -54 -42q-11 -24 -28.5 -59.5t-37.5 -42.5q-9 -3 -31 -10q60 -94 115 -91q49 75 49 239q-6 6 -13 6zM289 636q-73 0 -111 -108
q-29 -80 -29 -177q0 -42 9 -96q43 12 61 54q45 107 92 104h11q23 -3 36 -22q19 19 44 17q-12 27 -16 54q-5 36 -5 52q0 41 25 70q20 25 45 34q-76 18 -162 18zM542 776q-67 50 -169 48q-33 -1 -75 -17l-70 -28q0 -76 -7 -134q8 7 12 8q35 13 84 13q106 0 248 -51
q-14 34 -20 89q-6 49 -3 72z"/>
    </svg>
    <!-- images/speed.svg -->
    <svg id="svg-speed" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         viewBox="-10 0 1010 1000">
        <path fill="currentColor"
              d="M897 2l-476 369h448l-695 525l305 -395l-376 9l346 -508h448z"/>
    </svg>
    <!-- images/precision.svg -->
    <svg id="svg-precision" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         viewBox="-10 0 945 1000">
        <path fill="currentColor"
              d="M815 438q-7 131 -100 224.5t-224 100.5v88h-36v-88q-132 -7 -225 -100.5t-99 -224.5h-79v-36h79q7 -131 100 -223.5t224 -98.5v-71h36v71q130 6 223 98.5t100 223.5h70v36h-69zM491 116v159q50 5 87 40.5t44 86.5h156q-7 -116 -89.5 -198t-197.5 -88zM491 311v91h95
q-7 -36 -33 -61t-62 -30zM491 438v95q37 -5 63.5 -31.5t31.5 -63.5h-95zM455 312q-34 7 -58.5 31.5t-30.5 58.5h89v-90zM455 116q-116 6 -198.5 88t-89.5 198h163q6 -49 41 -84t84 -42v-160zM622 438q-5 52 -42 89t-89 42v158q116 -7 198.5 -90t88.5 -199h-156zM455 438h-90
q5 35 30 61t60 33v-94zM455 568q-50 -7 -85.5 -43.5t-40.5 -86.5h-162q6 116 88.5 199t199.5 90v-159z"/>
    </svg>
    <!-- images/head.svg -->
    <svg id="svg-head" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
         x="0px" y="0px" viewBox="0 0 490.2 490.2" enable-background="new 0 0 490.2 490.2;" xml:space="preserve">
        <path d="M69.503,391.6c0,30.1,24.5,54.5,54.5,54.5c0.8,0,1.7-0.1,2.5-0.2l31.7-4.7v31.9c0,9.5,7.7,17.1,17.2,17.1h210.3
            c9.5,0,17.2-7.7,17.2-17.2V333.5c36.8-36.5,57.7-86.5,57.7-138.4c0-107.6-87.5-195.1-195-195.1c-29.1,0-57.2,6.3-83.2,18.6
            c-68.6,31.8-112.9,101.2-112.9,176.7v25.3l-34.3,65.5c-7.2,13.8-7.5,28.1-0.7,39.3c6.7,11.1,19.5,17.6,35,17.6
            C69.503,343,69.503,391.6,69.503,391.6z M63.903,307.8L63.903,307.8c-0.1-0.4-0.1-2.4,1.7-5.8l36.3-69.2c1.3-2.5,2-5.2,2-8v-29.5
            c0-62.2,36.5-119.3,93.1-145.6c21.6-10.2,44.7-15.4,68.7-15.4c88.6,0,160.7,72.1,160.7,160.8c0,44.9-19,88.1-52.1,118.5
            c-3.5,3.2-5.6,7.8-5.6,12.6V456h-176v-34.6c0-5-2.2-9.7-6-13c-3.8-3.2-8.8-4.7-13.7-4l-49.9,7.4c-10.7-0.6-19.2-9.4-19.2-20.2
            v-65.8c0-9.5-7.7-17.1-17.2-17.1h-17C65.903,308.6,64.103,307.8,63.903,307.8z"/>
    </svg>
    <!-- images/left-hand.svg -->
    <svg id="svg-left-hand" enable-background="new 0 0 512 512" viewBox="0 0 512 512">
        <g transform="translate(512, 0) scale (-1, 1)">
            <use xlink:href="#svg-right-hand"></use>
        </g>
    </svg>
    <!-- images/right-hand.svg -->
    <svg id="svg-right-hand" enable-background="new 0 0 512 512" viewBox="0 0 512 512">
        <g transform="rotate(180,256,256)">
            <path d="m 376.007,90 c -5.261,0 -10.31,0.916 -15.007,2.581 V 74.994 C 361,50.184 340.811,30 315.994,30 310.14,30 304.549,31.136 299.414,33.179 294.21,14.084 276.721,0 255.994,0 235.272,0 217.787,14.085 212.584,33.182 207.447,31.137 201.852,30 195.994,30 171.185,30 151,50.184 151,74.994 V 195.041 C 138.457,185.603 122.872,180 106.001,180 c -8.284,0 -15,6.716 -15,15 L 91,307.918 c 0,43.443 22.821,83.658 60,105.949 V 497 c 0,8.284 6.716,15 15,15 h 210 c 8.284,0 15,-6.716 15,-15 v -86.026 c 19.394,-21.572 30,-49.17 30,-78.4 V 134.994 C 421,110.184 400.816,90 376.007,90 Z M 391,332.574 c 0,23.353 -9.094,45.307 -25.606,61.82 C 362.58,397.206 361,401.022 361,405 v 77 H 181 c 0,0 0,-77.066 0,-77.068 -0.026,-5.861 -3.435,-11.043 -8.562,-13.484 C 140.701,375.455 121,343.477 121,307.918 l 0.001,-95.348 C 138.462,218.761 151,235.444 151,255 v 30 c 0,8.284 6.716,15 15,15 8.284,0 15,-6.716 15,-15 0,-10.51 0,-198.98 0,-210.006 C 181,66.726 187.727,60 195.994,60 204.269,60 211,66.726 211,74.994 V 225 c 0,8.284 6.716,15 15,15 8.284,0 15,-6.716 15,-15 V 44.994 C 241,36.726 247.727,30 255.994,30 264.269,30 271,36.726 271,44.994 V 225 c 0,8.284 6.716,15 15,15 8.284,0 15,-6.716 15,-15 V 74.994 C 301,66.726 307.727,60 315.994,60 324.269,60 331,66.726 331,74.994 V 225 c 0,8.284 6.716,15 15,15 8.284,0 15,-6.716 15,-15 V 134.994 C 361,126.726 367.732,120 376.007,120 384.275,120 391,126.726 391,134.994 Z"/>
        </g>
    </svg>
    <!-- images/chest.svg -->
    <svg id="svg-chest" enable-background="new 0 0 512 512" viewBox="0 0 512 512"
         xmlns="http://www.w3.org/2000/svg">
        <g>
            <path d="m407 62h-31c-24.393 0-45-21.523-45-47 0-8.284-6.716-15-15-15h-120c-8.284 0-15 6.716-15 15 0 25.477-20.607 47-45 47h-31c-57.897 0-105 47.103-105 105v180c0 8.284 6.716 15 15 15h76v135c0 8.284 6.716 15 15 15h300c8.284 0 15-6.716 15-15v-135h76c8.284 0 15-6.716 15-15v-180c0-57.897-47.103-105-105-105zm-16 420h-43.701c8.988-27.111 13.701-57.777 13.701-90 0-16.053-1.199-31.963-3.563-47.287-1.263-8.187-8.92-13.799-17.111-12.538-8.188 1.263-13.801 8.925-12.537 17.112 2.13 13.816 3.211 28.187 3.211 42.713 0 32.427-5.505 63.966-15.578 90h-118.844c-10.073-26.035-15.578-57.574-15.578-90 0-14.526 1.081-28.897 3.212-42.713 1.263-8.187-4.35-15.849-12.538-17.112-8.185-1.26-15.849 4.35-17.112 12.538-2.363 15.324-3.562 31.234-3.562 47.287 0 32.222 4.713 62.888 13.702 90h-43.702v-198.392c18.026 11.83 38.93 18.392 60.746 18.392h14.21c22.519 0 43.739-8.446 60.043-23.839 16.306 15.393 37.526 23.839 60.046 23.839h14.21c21.816 0 42.72-6.562 60.745-18.39zm91-150h-61v-76.515c12.121-15.929 20.931-35.879 25.561-54.946 1.955-8.05-2.986-16.161-11.036-18.116-8.052-1.954-16.161 2.987-18.116 11.037-12.168 50.096-48.543 78.54-87.154 78.54h-14.21c-30.545 0-44.511-21.904-49.438-25.606-5.854-5.854-15.356-5.857-21.213 0-4.869 3.66-18.969 25.607-49.438 25.607h-14.21c-38.547 0-74.964-28.362-87.154-78.541-1.956-8.05-10.067-12.99-18.117-11.035-8.05 1.956-12.991 10.067-11.035 18.117 4.615 18.995 13.389 38.945 25.561 54.94v76.518h-61.001v-165c0-41.355 33.645-75 75-75h31c37.058 0 66.839-28.131 73.535-62h92.931c6.694 33.872 36.479 62 73.534 62h31c41.355 0 75 33.645 75 75z"/>
            <path d="m256 332c-8.284 0-15 6.716-15 15v90c0 8.284 6.716 15 15 15s15-6.716 15-15v-90c0-8.284-6.716-15-15-15z"/>
            <circle cx="346" cy="227" r="15"/>
            <circle cx="166" cy="227" r="15"/>
        </g>
    </svg>
    <!-- images/right-foot.svg -->
    <svg id="svg-right-foot" enable-background="new 0 0 512 512" viewBox="0 0 512 512">
        <g transform="translate(512, 0) scale (-1, 1)">
            <use xlink:href="#svg-left-foot"></use>
        </g>
    </svg>
    <!-- images/left-foot.svg -->
    <svg id="svg-left-foot" enable-background="new 0 0 512.002 512.002" viewBox="0 0 512.002 512.002"
         xmlns="http://www.w3.org/2000/svg">
        <g>
            <g>
                <path d="m118.999 512.002c-59.364.003-107.482-56.967-80.497-139.911 15.268-46.93 22.69-88.833 22.69-128.104 0-72.724-29.999-88.597-30-167.599v-61.388c0-8.284 6.715-15 15-15h210c8.814 0 15.731 7.573 14.939 16.349l-26.292 291.216c-1.69 18.591 8.001 35.989 24.689 44.333l140.205 70.102h26.459c24.813 0 45 20.187 45 45s-20.187 45-45 45h-164.464c-12.81 0-25.608-3.083-37.013-8.915-23.88-12.211-52.458-12.342-76.446-.35-12.102 6.049-25.649 9.254-39.178 9.267-.03 0-.063 0-.092 0zm-57.807-482.002v46.387c.001 72.777 30 88.517 30 167.599 0 42.472-7.903 87.411-24.162 137.385-20.394 62.688 12.372 100.621 52.031 100.63 8.907-.009 17.826-2.118 25.793-6.101 32.486-16.24 71.184-16.062 103.52.474 7.196 3.68 15.271 5.625 23.354 5.625h164.464c8.271 0 15-6.729 15-15s-6.729-15-15-15h-30c-2.329 0-4.625-.542-6.708-1.583l-143.372-71.686c-27.813-13.906-43.966-42.903-41.151-73.872l24.816-274.858z"/>
            </g>
            <g>
                <path d="m136.192 392c-8.284 0-15-6.716-15-15 0-24.813 20.187-45 45-45 8.284 0 15 6.716 15 15s-6.716 15-15 15c-8.271 0-15 6.729-15 15 0 8.284-6.716 15-15 15z"/>
            </g>
        </g>
    </svg>
    <!-- images/helmet.svg -->
    <svg id="svg-helmet" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
        <path d="M258.094 18.5c-74.34 0-138.073 62.498-156.188 148.438 52.758-7.697 102.23-22.044 153.938-45.094l4.125-1.813 3.967 2.064c49.424 25.667 97.648 41.026 150.657 46.406-17.66-86.744-81.71-150-156.5-150zm1.28 122.156c-57.41 25.148-112.883 39.993-172.53 47 6.724 32.847 6.91 65.935-.5 98.938 89.29 41.602 231.648 43.154 340.594-.125-10.762-32.516-11.727-65.66-1.188-98.408-59.03-4.235-112.628-20.06-166.375-47.406zm-13.5 33.125h18.72v127.75h-18.72V173.78zm-58.78 11.19h18.687v101.655h-18.686V184.97zm115.72 0h18.686v101.655h-18.688V184.97zm-171.72 14.905h18.687v79.28h-18.686v-79.28zm227.72 0h18.686v79.28h-18.688v-79.28zm38.748 116.75c-14.302 4.282-28.96 7.873-43.78 10.844l-19.22 64.06c26.114-17.337 48.002-43.31 63-74.905zm-277.53 2.875c13.95 28.257 33.448 51.85 56.562 68.53l-17.688-58.905c-13.397-2.61-26.387-5.826-38.875-9.625zm213.156 11.656c-51.63 8.175-104.745 8.588-153.72 1.438l20.845 69.5c18 8.52 37.49 13.187 57.78 13.187 18.588 0 36.507-3.92 53.22-11.124l21.875-73zm-195.5 47.156c-19.436 21.562-36.416 44.367-48.594 72.157 70.233-8.736 133.743 14.684 168.03 50.75 39.684-35.607 103.71-55.685 170.876-44.25-15.08-29.372-33.32-51.982-53.938-74-31.187 31.75-71.53 51-115.968 51-46.568 0-88.65-21.142-120.406-55.658z"/>
    </svg>
    <!-- images/right-gauntlet.svg -->
    <svg id="svg-right-gauntlet" enable-background="new 0 0 512 512" viewBox="0 0 512 512">
        <g transform="translate(512, 0) scale (-1, 1)">
            <use xlink:href="#svg-left-gauntlet"></use>
        </g>
    </svg>
    <!-- images/left-gauntlet.svg -->
    <svg id="svg-left-gauntlet" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
        <path fill="#000"
              d="M123.153 24.602c-11.349.764-48.792 83.005-63.545 132.174-8.046 26.818 2.983 74.734 41.723 106.45 8.813-1.502 16.946-3.047 24.434-4.626-22.473-24.22-39.048-50.488-47.772-82.059l-1.021-3.699 1.963-3.299c26.135-43.925 37.681-68.548 50.85-112.24l3.849-12.773 10.402 8.351c14.624 11.743 23.72 18.084 32.098 21.809-14.428-22.99-31.841-41.36-52.46-50.06a2.164 2.164 0 0 0-.52-.028zm19.791 50.203c-11.724 36.176-24.141 62.49-46.508 100.379 9.004 29.978 25.746 54.616 49.733 78.65 18.744-4.857 32.588-9.929 43.383-14.978 16.875-7.894 26.514-15.73 36.92-23.701-6.532-34.91-18.944-80.14-38.018-118.375-14.754-2.769-27.196-8.373-45.51-21.975zm90.094 158.008c-9.156 7.022-19.796 14.833-35.861 22.347-17.365 8.123-40.947 15.887-76.29 22.793 35.349 28.759 64.905 62.213 112.643 82.157 2.79-15.613 10.509-29.532 20.61-39.782 9.547-9.688 21.609-16.383 34.252-16.82 2.202-5.202 5.378-10.557 10.593-14.93 6.41-5.374 15.626-8.323 26.932-8.156a35.046 35.046 0 0 1 4.807-5.424c-7.384-1.603-16.19-3.168-27.145-5.586zm120.275 50.299c-.04.009-.084.012-.125.021-11.264 3.729-12.514 6.776-16.947 16.078-8.484-1.005-19.247-2.081-25.69 3.16-6.017 6.313-7.279 12.696-9.685 20.715-14.012-3.276-25.77 1.842-33.904 9.877-8.032 8.15-14.35 20.016-16.082 32.65 5.926 2.628 12.109 4.214 18.139 5.727 12.69-15.498 32.27-33.513 50.66-36.851 12.995-13.444 28.669-18.08 41.183-19.891a60.105 60.105 0 0 1 11.764-8.4c-6.632-11.786-12.405-18.622-19.313-23.086zm-232.011 18.882c-1.967 12.934-7.997 24.573-.64 46.305 32.36 70.655 41.042 23.73 93.735 22.953-38.944-18.938-66.126-45.737-93.095-69.258zm267.765 17.102c-4.87.972-9.343 3.536-13.062 6.28 9.197 12.249 16.987 27.313 23.28 43.81 7.916-2.052 14.75-4.612 21.103-7.506-6.473-26.762-18.951-37.976-31.32-42.584zm-29.935 13.906c-7.676 1.509-15.588 4.36-22.774 10.35 8.367 8.844 20.976 24.773 26.053 43.283 7.632-1.268 15.91-3.698 21.006-8.576-6.608-17.858-15.058-33.73-24.285-45.057zm-38.139 19.668c-14.313 5.357-25.257 14.981-34.674 25.938l19.383 26.324c13.696-1.49 26.639-6.254 39.39-13.299-4.69-15.098-18.62-32.912-24.447-38.607zm108.848 24.365c-6.679 3.099-13.973 5.985-22.237 8.375 6.323 10.32 11.618 21.138 15.602 32.543 7.703-3.07 14.902-6.372 21.264-10.082-3.964-11.28-8.68-22.055-14.63-30.836zM164.687 408.39l49.638 43.377c11.274-13.516 27.044-23.94 42.492-33.942l-22.02-25.32c-24.334-8.01-52.756 2.355-70.11 15.885zM391.9 394.153c-6.866 5.056-14.143 7.727-21.795 9.377 5.371 9.31 10.375 19.502 14.354 29.755 7.946-2.139 15.451-4.432 22.344-7.775-3.648-10.897-8.68-21.303-14.903-31.357zm-39.88 14.105c-11.759 6.313-24.191 11.162-37.42 13.545l13.316 27.447c14.663-2.177 28.099-3.684 39.666-9.746-4.195-10.706-9.777-21.706-15.563-31.246zm98.017 17.156c-6.627 3.604-13.647 6.703-20.846 9.534 2.83 7.167 5.28 14.119 7.21 20.757 10.397-1.435 20.263-5.912 18.179-13.869-1.423-5.296-2.923-10.83-4.543-16.422zM268.82 431.54c-16.062 10.564-31.09 20.975-40.728 32.256l1.392 1.217c16.648 14.548 36.256 20.475 44.95 9.13 8.522-11.12 10.536-24.116-5.614-42.603zm144.01 10.957c-7.166 3.334-14.4 5.634-21.465 7.58 3.051 6.991 5.842 13.849 8.244 20.48 9.2-.457 17.732-4.025 19.33-10.442-1.622-5.49-3.688-11.409-6.109-17.618zm-38.437 13.69c-12.724 6.396-25.866 8.467-38.184 10.154l6 12.367c10.038 10.705 32.656 11.336 42.21 2.944-2.654-7.907-6.1-16.516-10.026-25.465z"/>
    </svg>
    <!-- images/chest-armor.svg -->
    <svg id="svg-chest-armor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
        <path d="M156.7 25.83L89 39.38c-.1 58.57-1.74 119.32-43.49 167.22C104.4 246.5 189 260.7 247 248.8v-99L108.3 88.22l7.4-16.44L256 134.2l140.3-62.42 7.4 16.44L265 149.8v99c58 11.9 142.6-2.3 201.5-42.2-41.8-47.9-43.4-108.65-43.5-167.22l-67.7-13.55c-12.9 13.88-20.6 28.15-32.9 40.53C308.9 79.78 289.5 89 256 89c-33.5 0-52.9-9.22-66.4-22.64-12.3-12.38-20-26.65-32.9-40.53zM53.88 232.9C75.96 281 96.07 336.6 102.7 392.8l65 22.8c4.2-52.7 28.2-104 63.7-146.1-55.1 6.3-122.7-5.8-177.52-36.6zm404.22 0c-54.8 30.8-122.4 42.9-177.5 36.6 35.5 42.1 59.5 93.4 63.7 146.1l65.2-22.9c6.6-56.8 26.6-111.8 48.6-159.8zM256 269c-40.5 43.1-67.7 97.9-70.7 152.7l61.7 21.6V336h18v107.3l61.7-21.6c-3.1-54.8-30.2-109.6-70.7-152.7zm151.7 143.4L297 451.1v18.8l110.2-44.1c.1-4.5.3-8.9.5-13.4zm-303.3.1c.3 4.5.4 8.9.5 13.4l110.1 44v-18.7l-110.6-38.7zM279 457.4l-23 8.1-23-8v19.6l23 9.2 23-9.2v-19.7z"/>
    </svg>
    <!-- images/right-leg-armor.svg -->
    <svg id="svg-right-leg-armor" enable-background="new 0 0 512 512" viewBox="0 0 512 512">
        <g transform="translate(512, 0) scale (-1, 1)">
            <use xlink:href="#svg-left-leg-armor"></use>
        </g>
    </svg>
    <!-- images/left-leg-armor.svg -->
    <svg id="svg-left-leg-armor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
        <path d="m 258.02561,22.780813 c -16.412,11.587 -26.631,28.374 -36.65,39.778 8.137,22.599 16.325,42.335997 35.187,56.350997 16.456,-14.057 21.495,-34.862997 27.54,-54.925997 -6.256,-13.603 -14.977,-30.262 -26.077,-41.203 z m -94.23,23.323 c -33.77,113.895997 30.23,225.895997 12.43,335.785997 24.853,-23.71 52.384,-45.75 81.848,-53.067 2.978,1.06 6.18,2.3 8.724,3.46 21.665,-87.86 40.77,-191.667 47.006,-274.592997 -3.538,1.274 -7.076,3.12 -10.62,5.424 -10.39,28.262 -22.228,55.279997 -38.391,71.284997 l -14.61,167.787 -19.933,8.438 16.55,-177.107 c -24.04,-19.37 -37.343,-45.833997 -45.964,-74.734997 -12.093,-5.45 -25.495,-9.93 -37.041,-12.68 z m 93.226,301.725997 c -27.52,7.846 -58.843,32.065 -78.594,60.766 l -1.33,29.082 33.467,12.074 3.947,-26.867 c 22.716,-21.982 51.8,-35.71 75.524,-40.389 -5.099,-16.311 -19.704,-28.994 -33.014,-34.666 z m 38.316,51.873 c -30.189,5.154 -49.151,16.373 -63.854,31.508 l -4.275,29.084 c 40.791,22.55 76.484,35.131 129.043,25.838 4.266,-14.55 1.655,-31.907 -8.657,-47.158 z"/>
    </svg>
</div>
<!-- End SVG images -->

</body>
</html>
